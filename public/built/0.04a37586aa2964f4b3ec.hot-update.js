webpackHotUpdate(0,{5:function(t,e){"use strict";!function(t){t[t.none=0]="none",t[t.list=1]="list",t[t.form=2]="form",t[t.wizard=3]="wizard",t[t.confirm=4]="confirm"}(e.ActionType||(e.ActionType={})),e.ActionType},16:function(t,e){"use strict";!function(t){t[t.GET=0]="GET",t[t.POST=1]="POST",t[t.DELETE=2]="DELETE",t[t.PUT=3]="PUT",t[t.HEAD=4]="HEAD"}(e.MethodType||(e.MethodType={})),e.MethodType},44:function(t,e,o){"use strict";function i(t){var e=t.fieldFrag.querySelector("[sf-layout]");e&&t.form.grid&&Object.getOwnPropertyNames(t.form.grid).forEach(function(o,i,n){e.setAttribute(o,t.form.grid[o])})}var n=o(7),r=o(6);o(88),o(135);var l=o(159),a=o(162),s=o(18),c=o(157),u=o(158),d=o(156),f=o(155),p=o(151),m=o(152),y=o(149),h=o(153),k=o(154),b=o(150),g=o(148),v=o(160),A=o(161);o(69),o(244),o(163);var w="fxAction",t=n.module(w+"Module",[r,s["default"],"schemaForm","ng.jsoneditor"]);a["default"](t),l["default"](t),p["default"](t),m["default"](t),u["default"](t),c["default"](t),y["default"](t),h["default"](t),k["default"](t),b["default"](t),g["default"](t),d["default"](t),f["default"](t),v["default"](t),A["default"](t),t.config(["sfErrorMessageProvider",function(t){t.setDefaultMessage("302","[{{title}}]是必填项"),t.setDefaultMessage("103","[{{title}}]超过了最大值{{schema.maximum}}"),t.setDefaultMessage("101","[{{title}}]小于最小值{{schema.minimum}}"),t.setDefaultMessage("200","[{{title}}]字符长度小于最小值({{schema.minLength}})"),t.setDefaultMessage("201","[{{title}}]字符长度大于最大值({{schema.maxLength}})"),t.setDefaultMessage("400","数组长度不正确，{{schema.minItems||0}}-{{schema.maxItems||'∞'}}"),t.setDefaultMessage("500","格式不正确")}]).config(["sfBuilderProvider","schemaFormDecoratorsProvider","jsonEditorBuilderProvider","autoCompleteBuilderProvider",function(t,e,o,n){e.defineAddOn("materialDecorator","jeditor","./decorators/jsoneditor.jade",t.stdBuilders.concat(o.builder)),e.defineAddOn("materialDecorator","card","./decorators/card.jade",[t.builders.sfField,t.builders.condition,t.builders.transclusion]),e.defineAddOn("materialDecorator","autocomplete-1","./decorators/autocomplete-1.jade",[t.builders.sfField,i,t.builders.condition,n.builder,t.builders.transclusion])}]).run(["$templateCache","autoCompleteBuilder",function(t){t.put("./decorators/jsoneditor.jade",o(102)()),t.put("./decorators/card.jade",o(101)()),t.put("./decorators/autocomplete-1.jade",o(100)()),t.put("./decorators/section-1.jade",o(103)())}]),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=t.name},148:function(t,e,o){"use strict";function i(){return{restrict:"EA",template:o(104)(),bindToController:{formData:"=ngModel",key:"@"},require:"^"+n,controller:r,controllerAs:"formBuilderCtl",replace:!0}}var n="fxBuilderAction",r=function(){function t(t,e){this.fxAction=t,this.toolbarUtils=e,this.formData=this.formData||{}}return t.$inject=["fxAction","toolbarUtils"],t}();i.$inject=[],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.directive(n,i)}},149:function(t,e,o){"use strict";function i(){return{restrict:"EA",template:o(106)(),scope:!0,require:"^"+r,bindToController:{key:"@",formData:"=ngModel",submitCallBack:"=?ngSubmit"},controller:l,controllerAs:"dialogFormCtl",replace:!1,compile:function(t){return t.replaceWith(angular.element(t.html())),function(t,e,o,i){t.$watch(function(){return i.key},function(){i.getActionModel()})}}}}var n=o(3),r="fxDialogFormAction",l=function(){function t(t,e,o,i,n){this.$scope=t,this.fxAction=e,this.materialUtils=o,this.toolbarUtils=i,this.$mdDialog=n,this.formData=this.formData||{}}return t.prototype.doSubmit=function(t){var e=this,o=this.fxAction.doAction(this.key,this.formData,t);return this.isBusy=!0,o&&o.then(function(t){e.actionModel.closeDialog===!0&&e.$mdDialog.hide(t),n.isFunction(e.submitCallBack)&&e.submitCallBack()})["finally"](function(){e.isBusy=!1}),o},t.prototype.getActionModel=function(){var t=this;this.fxAction.getModel(this.key).then(function(e){t.actionModel=e,t.toolbars=[t.toolbarUtils.noneBuilder("icon").iconBuilder(t.actionModel.icon).toValue(),t.toolbarUtils.labelBuilder(t.actionModel.title).attrBuilder({flex:""}).toValue(),t.toolbarUtils.btnBuilder("关闭","md-icon-button",!1).iconBuilder("close").btnClick(function(e){t.$mdDialog.cancel()}).toValue()]})},t.$inject=["$scope","fxAction","materialUtils","toolbarUtils","$mdDialog"],t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.directive(r,i)}},150:function(t,e,o){"use strict";function i(){return{restrict:"EA",template:o(111)(),scope:!0,require:"^"+n,bindToController:{key:"@",formData:"=ngModel",submitCallBack:"=?ngSubmit"},controller:r,controllerAs:"dialogWizardCtl",replace:!1,compile:function(t){return t.replaceWith(angular.element(t.html())),function(t,e,o,i){t.$watch(function(){return i.key},function(){i.getActionModel()})}}}}var n="fxDialogWizardAction",r=function(){function t(t,e,o,i,n){this.$scope=t,this.fxAction=e,this.materialUtils=o,this.toolbarUtils=i,this.$mdDialog=n,this.formData=this.formData||{}}return t.prototype.getActionModel=function(){var t=this;this.fxAction.getModel(this.key).then(function(e){t.actionModel=e,t.toolbars=[t.toolbarUtils.noneBuilder("icon").iconBuilder(t.actionModel.icon).toValue(),t.toolbarUtils.labelBuilder(t.actionModel.title).attrBuilder({flex:""}).toValue(),t.toolbarUtils.btnBuilder("关闭","md-icon-button",!1).iconBuilder("close").btnClick(function(e){t.$mdDialog.cancel("用户关闭")}).toValue()]})},t.$inject=["$scope","fxAction","materialUtils","toolbarUtils","$mdDialog"],t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.directive(n,i)}},151:function(t,e,o){"use strict";function i(){return{restrict:"EA",template:o(107)(),scope:!0,require:"^fxFormAction",bindToController:{formData:"=ngModel",actionModel:"=?",key:"@?"},controller:n,controllerAs:"formCtl",replace:!0,transclude:!0,link:function(t,e,o,i){t.$watch(function(){return i.key},function(){i.getActionModel()})}}}var n=function(){function t(t,e){this.$scope=t,this.fxAction=e,this.formData=this.formData||{}}return t.prototype.getActionModel=function(){var t=this;this.fxAction.getModel(this.key).then(function(e){t.actionModel=e})},t.$inject=["$scope","fxAction"],t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.directive("fxFormAction",i)}},152:function(t,e,o){"use strict";function i(){return{restrict:"EA",template:o(108)(),scope:!0,bindToController:{key:"@",selected:"=?"},controller:r,controllerAs:"listCtl",replace:!0,transclude:!0}}var n=o(5),r=function(){function t(t,e,o,i,n,r){var l=this;this.$scope=t,this.$q=e,this.$timeout=o,this.fxAction=i,this.toolbarUtils=n,this.materialUtils=r,this.mdLimitOptions=[10,30,50,100,300],this.clientData={},this.queryData={offset:0,limit:10,page:1},this.isBusy=!1,this.showPage=!1,this.selected=[],i.getModel(this.key).then(function(t){l.actionModel=_.cloneDeep(t),l.initToolbar(),l.initItemToolbar(),l.doSearch()}),this.onOrderChange=this.orderChange.bind(this),this.onPageChange=this.pageChange.bind(this),this.doSearchBind=this.doSearch.bind(this)}return t.prototype.doClickActionMenu=function(t,e,o){var i=this;this.fxAction.doActionModel(t,e,o).then(function(t){i.materialUtils.showMsg(""+(e.successMsg||"操作成功!")),i.$timeout(function(){e.refreshList&&i.doSearch(i.queryData.where||{})},200)})},t.prototype.initToolbar=function(){var t=this;this.actionModel.list.toolbars.push(this.toolbarUtils.noneBuilder("icon").iconBuilder(this.actionModel.icon,{fill:"black"}).toValue()),this.actionModel.list.toolbars.push(this.toolbarUtils.labelBuilder(""+this.actionModel.title).attrBuilder({flex:""}).toValue()),this.fxAction.getModels(this.actionModel.actions).then(function(e){_.forEach(e,function(e){e.type!==n.ActionType.list&&t.actionModel.list.toolbars.push(t.toolbarUtils.btnBuilder(e.title,"md-icon-button",!1).tooltipBuilder("").iconBuilder(e.icon,{fill:"black"}).btnClick(function(o,i){t.doClickActionMenu(o,e,i||{})}).toValue())}),t.actionModel.list.showRefreshBtn&&t.actionModel.list.toolbars.push(t.toolbarUtils.btnBuilder("刷新","md-icon-button",!1).iconBuilder("refresh",{fill:"black"}).btnClick(function(e){t.doSearch(t.queryData.where||{})}).toValue()),t.actionModel.list.showSearchBtn&&t.actionModel.list.toolbars.push(t.toolbarUtils.btnBuilder("{{listCtl.actionModel.list.showSearchPanel?'关闭搜索栏':'打开搜索栏'}}","md-icon-button",!1).iconBuilder("{{listCtl.actionModel.list.showSearchPanel?'window-open':'window-closed'}}",{fill:"black"}).btnClick(function(e){t.actionModel.list.showSearchPanel=!t.actionModel.list.showSearchPanel}).toValue())})},t.prototype.initItemToolbar=function(){var t=this,e=this.toolbarUtils.menuBuilder("","md-icon-button").tooltipBuilder("操作菜单").iconBuilder("expand_more").menuOptionsBuilder().toValue(),o=[],i=_.keyBy(this.actionModel.itemActions,"key");_.each(this.actionModel.itemActions,function(t){o.push(t.key)}),o.length&&this.fxAction.getModels(o).then(function(o){_.forEach(o,function(o,r){var l=i[r].condition;switch(o.type){case n.ActionType.form:case n.ActionType.wizard:case n.ActionType.confirm:var a=t.toolbarUtils.menuItemBuilder(o.title,null,!0).tooltipBuilder("").noOptions(!0,!1).iconBuilder(o.icon).btnClick(function(e,i){t.doClickActionMenu(e,o,i)});l&&a.conditionBuilder(l),e.items.push(a.toValue())}}),t.actionModel.list.itemToolbars=[e]})},t.prototype.orderChange=function(t){this.queryData.order=t,this.doSearch(this.queryData.where||{})},t.prototype.pageChange=function(t,e){e!==this.queryData.limit&&(t=1),this.queryData.page=t,t>0&&(this.queryData.offset=(t-1)*e),this.doSearch(this.queryData.where||{})},t.prototype.doSearch=function(t){var e=this;this.isBusy=!0,this.queryData.where=t||{},this.promise=this.fxAction.doAction(this.key,this.queryData),this.promise&&this.promise.then(function(t){e.fxAction.doDealResult(e.actionModel,t,e.clientData)})["finally"](function(){e.isBusy=!1})},t.$inject=["$scope","$q","$timeout","fxAction","toolbarUtils","materialUtils"],t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.directive("fxListAction",i)}},153:function(t,e,o){"use strict";function i(){return{restrict:"EA",template:o(109)(),bindToController:{formData:"=ngModel",key:"@",disabled:"=",isShow:"=",doSearch:"=?",title:"=?"},require:"^"+l,controller:a,controllerAs:"searchCtl",replace:!0}}var n=o(3),r=o(25),l="fxSearchAction",a=function(){function t(t,e){this.fxAction=t,this.toolbarUtils=e,this.initSearchToolbar(),this.formData=this.formData||{}}return t.prototype.clearFilterData=function(){var t=this;n.forEach(this.formData,function(e,o){delete t.formData[o]})},t.prototype.initSearchToolbar=function(){var t=this;this.toolbars=[this.toolbarUtils.labelBuilder("{{searchCtl.title}}搜索").attrBuilder({flex:""}).toValue(),this.toolbarUtils.btnBuilder("清空搜索条件","md-icon-button",!1).iconBuilder("clear_all").btnClick(function(e){t.clearFilterData()}).toValue(),this.toolbarUtils.btnBuilder("关闭搜索栏","md-icon-button",!1).iconBuilder("{{searchCtl.isShow?'window-open':'window-closed'}}").btnClick(function(e){t.isShow=!t.isShow}).toValue()]},t.prototype.doPreSearch=function(t,e){var o={};this.fxAction.doFormCheck(e)&&n.isFunction(this.doSearch)&&(n.forEach(this.formData,function(t,e){"/"===e.substr(0,1)&&r.set(o,e,t)}),this.doSearch(o))},t.$inject=["fxAction","toolbarUtils"],t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.directive(l,i)}},154:function(t,e,o){"use strict";function i(){return{restrict:"EA",template:o(112)(),scope:!0,require:"^fxWizardAction",bindToController:{formData:"=ngModel",submitCallBack:"=?ngSubmit",key:"@"},controller:r,controllerAs:"wizardCtl",replace:!0,transclude:!0,link:function(t,e,o,i){t.$watch(function(){return i.key},function(){i.getActionModel()})}}}var n=o(5),r=function(){function t(t,e,o,i,n,r){var l=this;this.$scope=t,this.$timeout=e,this.fxAction=o,this.toolbarUtils=i,this.materialUtils=n,this.$mdDialog=r,this.isShow=!0,this.selectedIndex=0,this.initToolbar(),this.$scope.$on("$destroy",function(){l.formData=null,l.$forms=null,l.toolbars=null,l.actionModel=null})}return t.prototype.initForm=function(t,e){this.$forms||(this.$forms={}),this.$forms[t.key]=e[t.key+"Form"]},t.prototype.showForm=function(t,e){return 0===e||this.$forms.hasOwnProperty(t.key)||e==this.selectedIndex||e==this.selectedIndex+1},t.prototype.doCheckCurrentForm=function(t){var e=this.actionModel.wizard.actions[_.isUndefined(t)?this.selectedIndex:t];if(this.$forms){var o=this.$forms[""+e.key];if(!this.fxAction.doFormCheck(o))return!1}return!0},t.prototype.doCheckForms=function(){var t=this,e=!0;return _.each(this.actionModel.wizard.actions,function(o,i){if(e=t.doCheckCurrentForm(i),!e)return t.selectedIndex=i,!1}),e},t.prototype.reset=function(){var t=this;this.formData={},this.$forms={},this.selectedIndex=0,this.isShow=!1,this.$timeout(function(){t.isShow=!0},0)},t.prototype.initToolbar=function(){var t=this;this.toolbars=[this.toolbarUtils.btnBuilder("上一步",null,!0,"top").iconBuilder("navigate_before").conditionBuilder("wizardCtl.selectedIndex>0",!1).btnClick(function(e){t.selectedIndex&&t.selectedIndex--}).toValue(),this.toolbarUtils.btnBuilder("下一步",null,!0,"top").iconBuilder(null,null,"navigate_next").conditionBuilder("wizardCtl.selectedIndex < wizardCtl.actionModel.wizard.actions.length-1",!1).btnClick(function(e){t.doCheckCurrentForm()&&_.isArray(t.actionModel.wizard.actions)&&t.actionModel.wizard.actions.length>t.selectedIndex&&t.selectedIndex++}).toValue(),this.toolbarUtils.btnBuilder("完成","md-primary",!0,"top").iconBuilder("done_all").conditionBuilder("!wizardCtl.isBusy && wizardCtl.selectedIndex===wizardCtl.actionModel.wizard.actions.length-1",!1).btnClick(function(e){t.doCheckForms()&&(t.isBusy=!0,t.fxAction.doAction(t.actionModel.key,t.formData).then(function(e){t.actionModel.closeDialog===!0&&t.$mdDialog.hide(e),_.isFunction(t.submitCallBack)&&t.submitCallBack()})["finally"](function(){t.isBusy=!1}))}).toValue()]},t.prototype.getActionModel=function(){var t,e=this;this.fxAction.getModel(this.key).then(function(o){return t=_.cloneDeep(o),e.fxAction.getModels(o.wizard.actions)}).then(function(o){var i=[];_.each(t.wizard.actions,function(e){_.isString(e)&&(e=o[e]),!e||e.type!==n.ActionType.form&&e.type!==n.ActionType.wizard||(e.form.dataSchema||e.type!==n.ActionType.form||(e.form.dataSchema=t.wizard.defaultSchema.dataSchema),i.push(e))}),t.wizard.actions=i,e.actionModel=t})},t.$inject=["$scope","$timeout","fxAction","toolbarUtils","materialUtils","$mdDialog"],t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.directive("fxWizardAction",i)}},155:function(t,e,o){"use strict";var i=o(5),n=function(){function t(e,o){var n={key:t.key,type:i.ActionType.form,title:"结果反馈",icon:"view-module",form:{dataSchema:{type:"object",properties:{data:{type:"object",title:"返回结果"}}},formSchema:[{key:"data",type:"jeditor"}]}};return n}return t.$inject=["toolbarUtils","actionUtils"],t.key="resultAction",t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=[n];_.each(e,function(e){t.service(e.key,e)})}},156:function(t,e,o){"use strict";var i=o(5),n=o(16),r={type:"object",required:["key","host","interval"],properties:{key:{type:"string",title:"KEY"},host:{type:"string",title:"主HOST"},domainWhiteList:{type:"array",title:"域名白名单","default":[],items:{type:"string",format:"url-ip",title:"域名或者IP"}},whitePathList:{type:"array",title:"路径白名单","default":[],items:{type:"object",title:"路径配置",required:["regexp","scope"],properties:{enable:{type:"boolean",title:"是否启用"},regexp:{type:"string",title:"正则规则"},scope:{type:"string",title:"修饰符"},description:{type:"string",title:"介绍"}}}},interval:{type:"number","default":1e3,minimum:1e3,title:"下载间隔，单位ms"},downloader:{type:"string","default":"superagent",title:"下载策略"},initDomain:{type:"string",title:"初始化域名"},proxySettings:{type:"object",title:"基础设置",properties:{useProxy:{type:"boolean",title:"是否启用代理"},timeout:{type:"number",title:"超时时间"},charset:{type:"string",title:"字符编码"},ua:{type:"string",title:"USERAGENT"},ipInfo:{type:"object",title:"代理ip设置",properties:{host:{type:"string",format:"url-ip",title:"代理ip或域名"},port:{type:"number",title:"代理端口"}}}}},pages:{type:"array",title:"分析页面配置",items:{type:"object",required:["key","fieldKey"],title:"分析页面配置",properties:{key:{type:"string",title:"页面的KEY"},areas:{type:"array",title:"页面区域",items:{type:"object",required:["selector","dealStrategy","key"],properties:{key:{type:"string",title:"区域KEY"},selector:{type:"string",title:"选择器"},dealStrategy:{type:"string","default":"jsdom",title:"分析策略"}}}},rule:{type:"array",title:"匹配规则","default":[],items:{type:"object",title:"路径配置",required:["regexp","scope"],properties:{regexp:{type:"string",title:"正则规则"},scope:{type:"string",title:"修饰符"}}}},fieldKey:{type:"string",title:"主键字段"},strict:{type:"boolean",title:"是否启用严格模式"},strictFields:{type:"array",title:"严格模式下，验证字段","default":[],items:{type:"string",title:"验证字段"}},fields:{type:"object",title:"分析字段配置"}}}},description:{type:"string",title:"描述",maxLength:500}}},l=function(){function t(e,o){var r={key:t.key,type:i.ActionType.list,title:"爬虫配置文件管理",icon:"content-save-settings",list:{columns:[o.columnBuilder("<span>{{::item.key}}</span>","KEY").toValue(),o.columnBuilder("<span>{{ ::item.host }}</span>","域名").toValue(),o.columnBuilder("<span>{{ ::item.interval }}</span>","间隔时间").toValue(),o.columnBuilder("<span>{{ ::item.downloader }}</span>","下载策略").toValue(),o.columnBuilder("<span>{{ ::item.description }}</span>","详情").toValue()],searchActionKey:h.key,showRefreshBtn:!0,showSearchBtn:!0,showSearchPanel:!1,toolbars:[],itemToolbars:[]},itemActions:[{key:m.key},{key:y.key},{key:p.key}],actions:[f.key],interfaces:[{key:"crawlerSettingList",method:n.MethodType.GET,address:"",port:null,path:"crawler_settings",jpp:{set:{"/total":"/count","/rows":"/rows"},copy:{},move:{},del:{}},isRestful:!0}]};return r}return t.$inject=["toolbarUtils","actionUtils"],t.key="crawlerSettingListAction",t}(),a=function(){function t(e,o){var n={key:t.key,type:i.ActionType.form,title:"基础设置",icon:"add",form:{formSchema:[{key:"key",type:"text",htmlClass:"md-block"},{key:"host",type:"text",htmlClass:"md-block"},{key:"initDomain",type:"text",htmlClass:"md-block"},{key:"interval",type:"number",htmlClass:"md-block"},{key:"downloader",type:"select",titleMap:[{name:"SUPERAGENT",value:"superagent"},{name:"PHANTOM",value:"phantom"}],htmlClass:"md-block"},{key:"description",type:"textarea",htmlClass:"md-block"}]}};return n}return t.$inject=["toolbarUtils","actionUtils"],t.key="crawlerSettingAddFirstAction",t}(),s=function(){function t(e,o){var n={key:t.key,type:i.ActionType.form,title:"白名单设置",icon:"add",form:{formSchema:[{key:"domainWhiteList",type:"chips",startEmpty:!0,description:"域名白名单，配置可以爬取的域名列表",showHints:!0,htmlClass:"md-block"},{key:"whitePathList",type:"array",fieldHtmlClass:"layout-row flex",startEmpty:!0,description:"路径白名单，配置可以爬取的路径列表",showHints:!0,items:[{type:"section",htmlClass:"layout-row flex",items:[{key:"whitePathList[].enable",type:"select",titleMap:[{name:"启用",value:!0},{name:"不启用",value:!1}]},{key:"whitePathList[].regexp",htmlClass:"md-block flex",type:"text"},{key:"whitePathList[].scope",type:"text"},{key:"whitePathList[].description",type:"text"}]}]}]}};return n}return t.$inject=["toolbarUtils","actionUtils"],t.key="crawlerSettingAddSecondAction",t}(),c=function(){function t(e,o){var n={key:t.key,type:i.ActionType.form,title:"其他设置",icon:"add",form:{formSchema:[{key:"proxySettings",type:"card",items:[{key:"proxySettings.useProxy",type:"checkbox"},{key:"proxySettings.timeout",type:"number",htmlClass:"md-block"},{key:"proxySettings.charset",type:"text",htmlClass:"md-block"},{key:"proxySettings.ua",type:"textarea",maxLength:300,htmlClass:"md-block"},{key:"proxySettings.ipInfo",type:"card",items:[{key:"proxySettings.ipInfo.host",type:"text",htmlClass:"md-block"},{key:"proxySettings.ipInfo.port",type:"number",htmlClass:"md-block"}]}],htmlClass:"md-block"}]}};return n}return t.$inject=["toolbarUtils","actionUtils"],t.key="crawlerSettingAddThirdAction",t}(),u=function(){function t(t,e){var o={key:d.key,type:i.ActionType.form,title:"页面配置",icon:"add",form:{formSchema:[{key:"pages",type:"tabarray",startEmpty:!0,fieldHtmlClass:"layout-column flex",items:[{type:"section",grid:{flex:""},items:[{key:"pages[].key",type:"text",htmlClass:"md-block"},{key:"pages[].fieldKey",type:"text",htmlClass:"md-block"},{key:"pages[].strict",type:"switch",htmlClass:"md-block"},{key:"pages[].strictFields",startEmpty:!0,type:"chips",htmlClass:"md-block"},{key:"pages[].rule",type:"array",startEmpty:!0,items:[{type:"section",htmlClass:"layout-row flex",items:[{key:"pages[].rule[].regexp",htmlClass:"md-block flex",type:"text"},{key:"pages[].rule[].scope",type:"text"}]}]}]}]}]}};return o}return t.$inject=["toolbarUtils","actionUtils"],t.key="crawlerSettingAddForthAction",t}(),d=function(){function t(e,o){var n={key:t.key,type:i.ActionType.form,title:"页面配置",icon:"add",form:{formSchema:[{key:"pages",type:"tabarray",items:[{type:"section",htmlClass:"column-row flex",items:[{key:"pages[].key",type:"text",htmlClass:"md-block"},{key:"pages[].areas",type:"array",startEmpty:!0,description:"区域配置，用户优化分析性能，减少dom的查询。",showHints:!0,items:[{type:"section",grid:{flex:"",layout:"row"},items:[{key:"pages[].areas[].key",type:"text"},{key:"pages[].areas[].selector",htmlClass:"md-block flex",type:"text"},{key:"pages[].areas[].dealStrategy",type:"text"}]}]},{key:"pages[].fields",type:"jeditor",htmlClass:"md-block"}]}]}]}};return n}return t.$inject=["toolbarUtils","actionUtils"],t.key="crawlerSettingAddFifthAction",t}(),f=function(){function t(){var e={key:t.key,type:i.ActionType.wizard,title:"新建爬虫配置文件",icon:"add",refreshList:!0,wizard:{defaultSchema:{dataSchema:r},actions:[a.key,s.key,c.key,u.key,d.key]},closeDialog:!0,interfaces:[{key:"crawlerSettingAdd",method:n.MethodType.POST,address:"",port:null,path:"crawler_settings",isRestful:!0}]};return e}return t.key="crawlerSettingAddAction",t}(),p=function(){function t(){var e={key:t.key,type:i.ActionType.wizard,title:"复制爬虫配置文件",icon:"content_copy",refreshList:!0,wizard:{defaultSchema:{dataSchema:r},actions:[a.key,s.key,c.key,u.key,d.key]},closeDialog:!0,interfaces:[{key:"crawlerSettingAdd",method:n.MethodType.POST,address:"",port:null,path:"crawler_settings",isRestful:!0}]};return e}return t.key="crawlerSettingCopyAction",t}(),m=function(){function t(e,o){var l={key:t.key,type:i.ActionType.wizard,title:"修改爬虫配置文件",icon:"edit",refreshList:!0,wizard:{defaultSchema:{dataSchema:r},actions:[a.key,s.key,c.key,u.key,d.key]},closeDialog:!0,interfaces:[{key:"crawlerSettingEdit",method:n.MethodType.PUT,idFieldPath:"/key",address:"",port:null,path:"crawler_settings",isRestful:!0}]};return l}return t.$inject=["toolbarUtils","actionUtils"],t.key="crawlerSettingEditAction",t}(),y=function(){function t(){var e={key:t.key,type:i.ActionType.confirm,title:"删除爬虫配置文件",icon:"delete",refreshList:!0,confirm:{confirmTitle:"",confirmContent:"确定要删除爬虫配置文件吗!"},interfaces:[{key:"crawlerSettingDelete",method:n.MethodType.DELETE,idFieldPath:"/key",address:"",port:null,path:"crawler_settings",isRestful:!0}]};return e}return t.key="crawlerSettingDeleteAction",t}(),h=function(){function t(){var e={key:t.key,type:i.ActionType.form,title:"搜索爬虫配置文件",icon:"search",form:{dataSchema:r,formSchema:[{key:"key",type:"text",required:!1,copyValueTo:["/key/$eq"],htmlClass:"md-block"}]}};return e}return t.key="crawlerSettingSearchAction",t}(),k=function(){function t(){var e={key:t.key,type:i.ActionType.form,title:"爬虫命令",icon:"apple-keyboard-command",form:{dataSchema:{type:"object",required:["key","action"],properties:{key:{type:"string",title:"配置文件KEY"},action:{type:"string",title:"执行的命令"},options:{type:"object",title:"可选项",properties:{url:{type:"string",title:"测试的地址"},type:{type:"string","default":"forever",title:"爬虫启动模式"},startCrawler:{type:"boolean","default":!0,title:"开启爬取链接模块"},startDeal:{type:"boolean","default":!0,title:"开启html处理模块"},startDownload:{type:"boolean","default":!1,title:"开启图片下载模块"},startChip:{type:"boolean","default":!1,title:"开启更换ip模块"}}}}},formSchema:[{key:"action",type:"select",titleMap:[{value:"crawler:start",name:"开始爬虫",group:""},{value:"crawler:stop",name:"停止爬虫",group:""},{value:"crawler:create",name:"开启一个新爬虫",group:""},{value:"crawler:reset",name:"重置一个数据库",group:""},{value:"crawler:test",name:"测试地址",group:""}],htmlClass:"md-block"},{key:"key",type:"autocomplete-1",condition:"model.action==='crawler:start' || model.action==='crawler:reset'  || model.action==='crawler:test'",acOptions:{textField:"key",dataField:"rows",noCache:!1,search:"/where/key/$like",actionKey:l.key},htmlClass:"md-block"},{key:"options",type:"card",grid:{flex:""},condition:"!!model.action",items:[{key:"options.type",type:"select",htmlClass:"md-block",titleMap:[{value:"forever",name:"FOREVER启动"},{value:"",name:"NODE启动"}]},{key:"options.url",htmlClass:"md-block",type:"text"},{key:"options.startCrawler",condition:"model.action==='crawler:start'",htmlClass:"md-block",type:"checkbox"},{key:"options.startDeal",condition:"model.action==='crawler:start'",htmlClass:"md-block",type:"checkbox"},{key:"options.startDownload",condition:"model.action==='crawler:start'",htmlClass:"md-block",type:"checkbox"},{key:"options.startChip",condition:"model.action==='crawler:start'",htmlClass:"md-block",type:"checkbox"}]}]}};return e}return t.key="crawlerSettingAckAction",t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=[l,h,f,m,y,p,k,a,s,c,u,d];_.each(e,function(e){t.service(e.key,e)})}},157:function(t,e,o){"use strict";function i(){var t={key:"login",type:r.ActionType.form,icon:"",form:{dataSchema:{type:"object",required:["username","password"],properties:{username:{type:"string",minLength:4,maxLength:20,title:"用户名"},password:{type:"string",title:"密码",minLength:4,maxLength:20}}},formSchema:[{key:"username",type:"string",placeHolder:"用户名",icon:{leftIcon:"account"},htmlClass:"md-icon-left md-block"},{key:"password",type:"password",icon:{leftIcon:"lock"},htmlClass:"md-icon-left md-block"}]},interfaces:[{key:"loginAction",method:l.MethodType.POST,address:"",port:null,path:"/passport/login",isRestful:!1}]};return t}function n(){var t={key:"logout",type:r.ActionType.confirm,icon:"",confirm:{confirmTitle:"用户中心",confirmContent:"确定要退出么?",confirmOk:"果断退出",confirmCancel:"在看看"},interfaces:[{key:"logoutAction",method:l.MethodType.POST,address:"",port:null,path:"/passport/logout",isRestful:!1}]};return t}var r=o(5),l=o(16);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=[i(),n()];_.each(e,function(e){t.value(e.key,e)})}},158:function(t,e,o){"use strict";var i=o(5),n=o(16),r={type:"object",required:["key","title","icon"],properties:{key:{type:"string",title:"KEY"},title:{type:"string",title:"模块名称"},link:{type:"string",title:"路由状态名"},icon:{type:"string",title:"图标"},parentKey:{type:"string",title:"父亲节点KEY"},description:{type:"string",title:"描述",maxLength:"500"},showed:{type:"boolean",title:"是否显示"}}},l=function(){function t(e,o){var r={key:t.key,type:i.ActionType.list,title:"模块管理",icon:"view-module",list:{columns:[o.columnBuilder("<span>{{::item.key}}</span>","KEY").toValue(),o.columnBuilder("<span>{{ ::item.title }}</span>","模块名称").toValue(),o.columnBuilder('<ng-md-icon icon="{{ ::item.icon }}"></ng-md-icon>',"图标").toValue(),o.columnBuilder("<span>{{ ::item.lft }}</span>","lft","lft").toValue(),o.columnBuilder("<span>{{ ::item.rgt }}</span>","rgt","rgt").toValue()],searchActionKey:d.key,showRefreshBtn:!0,showSearchBtn:!0,showSearchPanel:!1,toolbars:[],itemToolbars:[]},itemActions:[{key:c.key},{key:u.key}],actions:[s.key],interfaces:[{key:"modulesList",method:n.MethodType.GET,address:"",port:null,path:"modules",jpp:{set:{"/total":"/count","/rows":"/rows"},copy:{},move:{},del:{}},isRestful:!0}]};return r}return t.$inject=["toolbarUtils","actionUtils"],t.key="module",t}(),a=function(){function t(e,o){var r={key:t.key,type:i.ActionType.list,title:"模块管理",icon:"view-module",interfaces:[{key:"moduleMenu",method:n.MethodType.GET,address:"",port:null,path:"/modules/menu",isRestful:!1}]};return r}return t.$inject=["toolbarUtils","actionUtils"],t.key="moduleMenuAction",t}(),s=function(){function t(e,o){var l={key:t.key,type:i.ActionType.form,title:"新建模块",icon:"add",refreshList:!0,form:{dataSchema:r,formSchema:[{key:"parentKey",type:"text",htmlClass:"md-block"},{key:"key",type:"text",htmlClass:"md-block"},{key:"title",type:"text",htmlClass:"md-block"},{key:"link",type:"text",htmlClass:"md-block"},{key:"icon",type:"text",htmlClass:"md-block"},{key:"description",type:"textarea",htmlClass:"md-block"},{key:"showed",type:"checkbox"}]},closeDialog:!0,interfaces:[{key:"modulesAdd",method:n.MethodType.POST,address:"",port:null,path:"modules",isRestful:!0}]};return l}return t.$inject=["toolbarUtils","actionUtils"],t.key="modulesAddAction",t}(),c=function(){function t(e,o){var l={key:t.key,type:i.ActionType.form,title:"修改模块",icon:"edit",refreshList:!0,form:{dataSchema:r,formSchema:[{key:"parentKey",type:"text",readonly:!0,htmlClass:"md-block"},{key:"key",type:"text",htmlClass:"md-block"},{key:"title",type:"text",htmlClass:"md-block"},{key:"link",type:"text",htmlClass:"md-block"},{key:"icon",type:"text",htmlClass:"md-block"},{key:"description",type:"textarea",htmlClass:"md-block"},{key:"showed",type:"checkbox"}]},closeDialog:!0,interfaces:[{key:"modulesEdit",method:n.MethodType.PUT,idFieldPath:"/key",address:"",port:null,path:"modules",isRestful:!0}]};return l}return t.$inject=["toolbarUtils","actionUtils"],t.key="modulesEditAction",t}(),u=function(){function t(){var e={key:t.key,type:i.ActionType.confirm,title:"删除模块",icon:"delete",refreshList:!0,confirm:{confirmTitle:"",confirmContent:"确定要删除模块吗!"},interfaces:[{key:"modulesDelete",method:n.MethodType.DELETE,idFieldPath:"/key",address:"",port:null,path:"modules",isRestful:!0}]};return e}return t.key="modulesDeleteAction",t}(),d=function(){function t(){var e={key:t.key,icon:"search",type:i.ActionType.form,title:"模块搜索表单",form:{dataSchema:r,formSchema:[{key:"key",type:"text",required:!1,placeHolder:"KEY",description:"请输入key来进行搜索,不支持模糊查询",showHints:!0,copyValueTo:["/key/$eq"],htmlClass:"md-block"},{key:"showed",type:"select",copyValueTo:["/showed/$eq"],titleMap:[{value:null,name:"全部"},{value:!0,name:"显示"},{value:!1,name:"不显示"}],htmlClass:"md-block"}]}};return e}return t.$inject=["toolbarUtils","actionUtils"],t.key="modulesSearchAction",t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=[u,a,l,d,s,c];_.each(e,function(e){t.service(e.key,e)})}},159:function(t,e,o){"use strict";var i=o(3),n=o(5),r=o(16),l=o(25),a=function(){function t(t,e,o,i){this.$scope=t,this.item=e,this.key=o,this.submit=i,console.log(arguments)}return t.$inject=["$scope","item","key","submit"],t}(),s=function(){function t(e,o,i,n,r,l){var a=this;return this.$rootScope=e,this.$injector=o,this.restUtils=i,this.mdUtils=n,this.$q=r,this.$mdDialog=l,this.$get=["$injector",function(e){var o=e.invoke(t,a,null);return o}],this}return t.prototype.getModel=function(t){var e=this.$q.defer();return t?this.$injector.has(t)?e.resolve(i.cloneDeepWith(this.$injector.get(t))):(this.mdUtils.showErrMsg("没有找到key["+t+"]!"),e.reject(t)):e.reject(),e.promise},t.prototype.getModels=function(t){var e=this,o=this.$q.defer(),n={},r=[],l={};return i.each(t,function(t){i.isObject(t)?n[t.key]=t:l[t]=e.getModel(t).then(function(e){n[t]=e})["catch"](function(t){r.push(t)})}),this.$q.all(l).then(function(){o.resolve(n)})["catch"](function(){o.resolve(n)}),o.promise},t.prototype.doActionModel=function(t,e,i,r){var l=this;switch(e.type){case n.ActionType.wizard:case n.ActionType.form:var s=(u={},u[n.ActionType.form]=o(105)(),u[n.ActionType.wizard]=o(110)(),u);return this.$mdDialog.show({targetEvent:t,clickOutsideToClose:!1,escapeToClose:!1,fullscreen:!0,locals:{item:i||{},key:e.key,submit:r},controller:a,controllerAs:"dialogCtl",template:s[e.type]}).then(function(){i=null});case n.ActionType.confirm:var c=this.$mdDialog.confirm().title(e.confirm.confirmTitle).textContent(e.confirm.confirmContent).ariaLabel(e.confirm.confirmTitle).targetEvent(t).ok(e.confirm.confirmOk||"确定").cancel(e.confirm.confirmCancel||"取消");
return this.$mdDialog.show(c).then(function(){return l.doAction(e.key,i)})}return null;var u},t.prototype.doFormCheck=function(t){return!(t&&(this.$rootScope.$broadcast("schemaFormValidate"),!t.$valid)&&(console.log(t.$error),this.mdUtils.showErrMsg("表单没有填写正确!"),1))},t.prototype.doDealResult=function(t,e,o){return i.forEach(t.interfaces,function(t){var n=e[t.key];n&&(i.forEach(t.jpp.set,function(t,e){l.set(o,e,l.get(n,t))}),i.forEach(t.jpp.del,function(t,e){l.remove(o,e)}))}),o},t.prototype.doAction=function(t,e,o){var n=this;if(this.doFormCheck(o))return this.getModel(t).then(function(t){var o={};return i.each(t.interfaces,function(t){var i,a=t.isRestful?n.restUtils.getCustomRestful(t.address,t.port,t.path):n.restUtils.getCustom(t.address,t.port,t.path);switch(t.method){case r.MethodType.POST:i=a.post(e,null);break;case r.MethodType.GET:i=a.customGET(null,e,null);break;case r.MethodType.PUT:i=a.customPUT(e,l.get(e,t.idFieldPath));break;case r.MethodType.DELETE:i=a.customDELETE(l.get(e,t.idFieldPath),null)}o[t.key]=i}),o}).then(function(t){return n.$q.all(t)})},t.$inject=["$rootScope","$injector","restUtils","materialUtils","$q","$mdDialog"],t._name="fxAction",t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.provider(s._name,[s])}},160:function(t,e,o){"use strict";function i(){var t=function(){function t(t,e){this.form=t,this.fxAction=e}return t.prototype.init=function(t,e){this.formData=e},t.prototype.onChange=function(t){return t?(this.selected=t,this.form.acOptions.keyField?n.set(this.formData,"/"+this.form.key.join("/"),n.get(t,this.form.acOptions.keyField)):void n.set(this.formData,"/"+this.form.key.join("/"),t)):n.remove(this.formData,"/"+this.form.key.join("/"))},t.prototype.query=function(){var t,e=this,o={},i={};return this.form.acOptions.actionKey?(n.set(i,this.form.acOptions.search,this.searchText),this.fxAction.getModel(this.form.acOptions.actionKey).then(function(o){return t=o,e.fxAction.doAction(t.key,i)}).then(function(i){return e.fxAction.doDealResult(t,i,o)}).then(function(t){return t[e.form.acOptions.dataField]})):this.form.data||[]},t.$inject=["form","fxAction"],t}(),e={fxAction:null};this.builder=function(o){o.form.acOptions=_.extend({textField:"",keyField:"",dataField:"",noCache:!1,search:"",actionKey:""},o.form.acOptions||{}),o.form.boost=new t(o.form,e.fxAction)},this.$get=["fxAction",function(t){return e.fxAction=t,{}}]}var n=o(25);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.provider("autoCompleteBuilder",[i])}},161:function(t,e){"use strict";function o(){function t(t){var e={modes:["tree","code","text"],mode:"code",name:t.form.key.join("")};t.form.preferText=!!t.form.preferText,t.form.jsonOptions=_.extend(t.form.jsonOptions||{},e)}this.builder=t,this.$get=[function(){return{}}]}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.provider("jsonEditorBuilder",[o])}},162:function(t,e,o){"use strict";var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},n=o(3),r=function(){function t(){}return t._builderName="actionUtils",t._toolbarName="toolbarActionUtils",t.builder=[function(){var t=function(){function t(t){this.data=t}return t.prototype.columnUnitBuilder=function(t,e){return void 0===e&&(e=!1),this.data=n.extend({},this.data,{unit:t,numeric:e}),this},t.prototype.toValue=function(){return this.data},t}(),e=function(t){function e(e){t.call(this,e),this.data=e}return i(e,t),e.prototype.columnBuilder=function(t,o,i,n,r){return new e({content:t,title:o,name:i,sort:n,unit:r})},e}(t);return new e}],t.toolbar=["fxAction","toolbarUtils",function(t,e){var o=function(){function t(){}return t.prototype.initToolbar=function(t){},t}();return new o}],t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.service(r._builderName,r.builder),t.service(r._toolbarName,r.toolbar)}},163:function(t,e,o){"use strict";var i=o(45),n=o(196),r=function(){function t(){i.addFormat("email",function(t,e){return!!n.isEmail(t)||1e4}),i.addFormat("mobile",function(t,e){return n.isMobilePhone(t,"zh-CN")?null:10003}),i.addFormat("json",function(t,e){return n.isJSON(t)?null:10004}),i.addFormat("url-ip",function(t,e){return n.isURL(t)||n.isIP(t)?null:{code:10005}}),i.setErrorReporter(function(t,e,o){return"Error code: "+t.code})}return t}();e.customFormats=new r},179:function(t,e,o){(function(t){"use strict";var i=o(6);o(70);var n=o(11),r=o(3),l=o(180),a=o(17),s=o(194),c=o(173),u=o(168);o(89);var d=o(5),f=angular.module("homeModule",[c["default"],u["default"],s["default"],a["default"],i,"ui.router",n]);f.config(["$stateProvider","$urlRouterProvider","$httpProvider","$mdThemingProvider","$locationProvider","mdSideMenuSectionsProvider",function(t,e,o,i,n,r,a){l.initRouter(e,t),r.initWithTheme(i)}]).run(["$rootScope","$state","$q","svgUtils",function(e,o,i,n){var l={},a=function(){l.$$isFinish=!0,o.go(l.toState.name,l.toParams,l.options)};e.$on("$stateChangeStart",function(t,e,o,i,n){console.log("$stateChangeStart",t,e,o,i,n)}),e.$on("$stateChangeStart",function(e,o,s,c,u,d){l.$$isFinish||(r.extend(l,{toState:o,toParams:s,fromState:c,fromParams:u,options:d}),e.preventDefault(),i.all({mdi:n.loadSvgUrl(t+"svgs/mdi.svg"),weibo:n.loadSvgUrl(t+"svgs/weibo.svg")}).then(a,a))})}]),f.value("iconInfoDetailForm",{key:"iconInfoDetailForm",icon:"search",type:d.ActionType.form,title:"ICON详情",form:{dataSchema:{type:"object",properties:{key:{type:"string",title:"KEY"}}},formSchema:[{key:"key",type:"string",placeHolder:"KEY",htmlClass:"md-block"}]}}),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=f.name}).call(e,"/")}});
//# sourceMappingURL=0.04a37586aa2964f4b3ec.hot-update.js.map