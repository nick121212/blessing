webpackHotUpdate(0,{44:function(t,e,i){"use strict";function o(t){var e=t.fieldFrag.querySelector("[sf-layout]");e&&t.form.grid&&Object.getOwnPropertyNames(t.form.grid).forEach(function(i,o,a){e.setAttribute(i,t.form.grid[i])})}var a=i(7),l=i(6);i(88),i(135);var n=i(159),s=i(162),r=i(18),c=i(157),d=i(158),u=i(156),h=i(155),f=i(151),m=i(152),p=i(149),b=i(153),y=i(154),M=i(150),g=i(148),B=i(160),A=i(161);i(69),i(244),i(163);var D="fxAction",t=a.module(D+"Module",[l,r["default"],"schemaForm","ng.jsoneditor"]);s["default"](t),n["default"](t),f["default"](t),m["default"](t),d["default"](t),c["default"](t),p["default"](t),b["default"](t),y["default"](t),M["default"](t),g["default"](t),u["default"](t),h["default"](t),B["default"](t),A["default"](t),t.config(["sfErrorMessageProvider",function(t){t.setDefaultMessage("302","[{{title}}]是必填项"),t.setDefaultMessage("103","[{{title}}]超过了最大值{{schema.maximum}}"),t.setDefaultMessage("101","[{{title}}]小于最小值{{schema.minimum}}"),t.setDefaultMessage("200","[{{title}}]字符长度小于最小值({{schema.minLength}})"),t.setDefaultMessage("201","[{{title}}]字符长度大于最大值({{schema.maxLength}})"),t.setDefaultMessage("400","数组长度不正确，{{schema.minItems||0}}-{{schema.maxItems||'∞'}}"),t.setDefaultMessage("500","格式不正确")}]).config(["sfBuilderProvider","schemaFormDecoratorsProvider","jsonEditorBuilderProvider","autoCompleteBuilderProvider",function(t,e,i,a){e.defineAddOn("materialDecorator","jeditor","./decorators/jsoneditor.jade",t.stdBuilders.concat(i.builder)),e.defineAddOn("materialDecorator","card","./decorators/card.jade",[t.builders.sfField,t.builders.condition,t.builders.transclusion]),e.defineAddOn("materialDecorator","autocomplete-1","./decorators/autocomplete-1.jade",[t.builders.sfField,o,t.builders.condition,a.builder,t.builders.transclusion])}]).run(["$templateCache","autoCompleteBuilder",function(t){t.put("./decorators/jsoneditor.jade",i(102)()),t.put("./decorators/card.jade",i(101)()),t.put("./decorators/autocomplete-1.jade",i(100)()),t.put("./decorators/section-1.jade",i(103)())}]),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=t.name},152:function(t,e,i){"use strict";function o(){return{restrict:"EA",template:i(108)(),scope:!0,bindToController:{key:"@",selected:"=?"},controller:l,controllerAs:"listCtl",replace:!0,transclude:!0}}var a=i(5),l=function(){function t(t,e,i,o,a,l){var n=this;this.$scope=t,this.$q=e,this.$timeout=i,this.fxAction=o,this.toolbarUtils=a,this.materialUtils=l,this.mdLimitOptions=[10,30,50,100,300],this.clientData={},this.queryData={offset:0,limit:10,page:1},this.isBusy=!1,this.showPage=!1,this.selected=[],o.getModel(this.key).then(function(t){n.actionModel=_.cloneDeep(t),n.initToolbar(),n.initItemToolbar(),n.doSearch()}),this.onOrderChange=this.orderChange.bind(this),this.onPageChange=this.pageChange.bind(this),this.doSearchBind=this.doSearch.bind(this)}return t.prototype.doClickActionMenu=function(t,e,i){var o=this;this.fxAction.doActionModel(t,e,i).then(function(t){o.materialUtils.showMsg(""+(e.successMsg||"操作成功!")),o.$timeout(function(){e.refreshList&&o.doSearch(o.queryData.where||{})},200)})},t.prototype.initToolbar=function(){var t=this;this.actionModel.list.toolbars.push(this.toolbarUtils.noneBuilder("icon").iconBuilder(this.actionModel.icon,{fill:"black"}).toValue()),this.actionModel.list.toolbars.push(this.toolbarUtils.labelBuilder(""+this.actionModel.title).attrBuilder({flex:""}).toValue()),this.fxAction.getModels(this.actionModel.actions).then(function(e){_.forEach(e,function(e){e.type!==a.ActionType.list&&t.actionModel.list.toolbars.push(t.toolbarUtils.btnBuilder(e.title,"md-icon-button",!1).tooltipBuilder("").iconBuilder(e.icon,{fill:"black"}).btnClick(function(i,o){t.doClickActionMenu(i,e,o||{})}).toValue())}),t.actionModel.list.showRefreshBtn&&t.actionModel.list.toolbars.push(t.toolbarUtils.btnBuilder("刷新","md-icon-button",!1).iconBuilder("refresh",{fill:"black"}).btnClick(function(e){t.doSearch(t.queryData.where||{})}).toValue()),t.actionModel.list.showSearchBtn&&t.actionModel.list.toolbars.push(t.toolbarUtils.btnBuilder("{{listCtl.actionModel.list.showSearchPanel?'关闭搜索栏':'打开搜索栏'}}","md-icon-button",!1).iconBuilder("{{listCtl.actionModel.list.showSearchPanel?'window-open':'window-closed'}}",{fill:"black"}).btnClick(function(e){t.actionModel.list.showSearchPanel=!t.actionModel.list.showSearchPanel}).toValue())})},t.prototype.initItemToolbar=function(){var t=this,e=this.toolbarUtils.menuBuilder("","md-icon-button").tooltipBuilder("操作菜单").iconBuilder("expand_more").menuOptionsBuilder().toValue(),i=[],o=_.keyBy(this.actionModel.itemActions,"key");_.each(this.actionModel.itemActions,function(t){i.push(t.key)}),i.length&&this.fxAction.getModels(i).then(function(i){_.forEach(i,function(i,l){var n=o[l].condition;switch(i.type){case a.ActionType.form:case a.ActionType.wizard:case a.ActionType.confirm:var s=t.toolbarUtils.menuItemBuilder(i.title,null,!0).tooltipBuilder("").noOptions(!0,!1).iconBuilder(i.icon).btnClick(function(e,o){t.doClickActionMenu(e,i,o)});n&&s.conditionBuilder(n),e.items.push(s.toValue())}}),t.actionModel.list.itemToolbars=[e]})},t.prototype.orderChange=function(t){this.queryData.order=t,this.doSearch(this.queryData.where||{})},t.prototype.pageChange=function(t,e){e!==this.queryData.limit&&(t=1),this.queryData.page=t,t>0&&(this.queryData.offset=(t-1)*e),this.doSearch(this.queryData.where||{})},t.prototype.doSearch=function(t){var e=this;this.isBusy=!0,this.queryData.where=t||{},this.promise=this.fxAction.doAction(this.key,this.queryData),this.promise&&this.promise.then(function(t){e.fxAction.doDealResult(e.actionModel,t,e.clientData)})["finally"](function(){e.isBusy=!1})},t.$inject=["$scope","$q","$timeout","fxAction","toolbarUtils","materialUtils"],t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.directive("fxListAction",o)}}});
//# sourceMappingURL=0.18951cab47a32b424116.hot-update.js.map