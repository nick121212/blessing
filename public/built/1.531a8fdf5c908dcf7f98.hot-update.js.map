{"version":3,"sources":["webpack:///1.531a8fdf5c908dcf7f98.hot-update.js","webpack:///./src/pages/page/services/execute.cmd.ts?0e43","webpack:///./src/pages/page/ctls/page.execute.cmd.ts?d6bb","webpack:///./src/pages/page/index.ts?3a77"],"names":["webpackHotUpdate","53","module","exports","__webpack_require__","action_model_1","interface_model_1","ExecuteCmdForm","actionModel","key","type","ActionType","form","title","icon","dataSchema","required","properties","command","listIps","default","minItems","items","formSchema","placeHolder","acOptions","textField","keyField","dataField","noCache","search","actionKey","htmlClass","qtOptions","resFilter","query","and","term","online","startEmpty","refreshList","closeDialog","interfaces","method","MethodType","POST","address","path","jpp","set","from","to","isRestful","Object","defineProperty","value","services","_","each","model","service","212","execute_cmd_1","PageExecuteCmdController","$rootScope","$stateParams","$timeout","materilUtils","fxAction","toolbarUtils","this","executeResult","doInitToolbar","formData","prototype","toolbars","noneBuilder","iconBuilder","toValue","labelBuilder","attrBuilder","flex","doSubmit","$event","results","_this","promise","doAction","isBusy","then","res","showMsg","getModel","doDealResult","$broadcast","data","cmdid","$inject","214","ngMaterial","ngMaterialIcons","mdDataTable","router_1","material_service_1","rest_service_1","action_1","dycompile_1","query_table_1","compare_1","execute_1","pages_1","angular","config","$stateProvider","$urlRouterProvider","initRouter","run","$state","restUtils","materialUtils","setConfig","restAngularConfigure","setErrorInterceptor","response","status","showErrMsg","msg","$on","event","item","_id","cancel","name"],"mappings":"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","file":"1.531a8fdf5c908dcf7f98.hot-update.js","sourcesContent":["webpackHotUpdate(1,{\n\n/***/ 53:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar action_model_1 = __webpack_require__(6);\n\tvar interface_model_1 = __webpack_require__(17);\n\tvar ExecuteCmdForm = (function () {\n\t    function ExecuteCmdForm() {\n\t        var actionModel = {\n\t            key: ExecuteCmdForm.key,\n\t            type: action_model_1.ActionType.form,\n\t            title: \"\",\n\t            icon: \"\",\n\t            form: {\n\t                dataSchema: {\n\t                    type: \"object\",\n\t                    required: [\"command\", \"listIps\"],\n\t                    properties: {\n\t                        command: {\n\t                            type: \"string\",\n\t                            title: \"命令\"\n\t                        },\n\t                        listIps: {\n\t                            type: \"array\",\n\t                            default: [],\n\t                            title: \"服务器列表\",\n\t                            minItems: 1,\n\t                            items: {\n\t                                type: \"object\"\n\t                            }\n\t                        }\n\t                    }\n\t                },\n\t                formSchema: [{\n\t                        key: \"command\",\n\t                        type: \"autocomplete-1\",\n\t                        placeHolder: \"请选择命令\",\n\t                        acOptions: {\n\t                            textField: \"title\",\n\t                            keyField: \"key\",\n\t                            dataField: \"rows\",\n\t                            noCache: true,\n\t                            search: \"/where/key/$like\",\n\t                            actionKey: \"command\"\n\t                        },\n\t                        htmlClass: \"md-block\"\n\t                    }, {\n\t                        key: \"listIps\",\n\t                        type: \"querytable\",\n\t                        qtOptions: {\n\t                            key: \"devices\",\n\t                            resFilter: { \"query\": { \"and\": [{ \"term\": { \"online\": 1 } }] } }\n\t                        },\n\t                        startEmpty: true,\n\t                        htmlClass: \"md-block\"\n\t                    }]\n\t            },\n\t            refreshList: true,\n\t            closeDialog: true,\n\t            interfaces: [{\n\t                    key: \"execute.cmd\",\n\t                    method: interface_model_1.MethodType.POST,\n\t                    address: \"\",\n\t                    path: \"/commands/manual/test\",\n\t                    jpp: {\n\t                        set: [{ \"from\": \"/queueItem\", \"to\": \"/data\" }]\n\t                    },\n\t                    isRestful: false\n\t                }]\n\t        };\n\t        return actionModel;\n\t    }\n\t    ExecuteCmdForm.key = \"execute.cmd\";\n\t    return ExecuteCmdForm;\n\t}());\n\texports.ExecuteCmdForm = ExecuteCmdForm;\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = function (module) {\n\t    var services = [ExecuteCmdForm];\n\t    _.each(services, function (model) {\n\t        module.service(model.key, model);\n\t    });\n\t};\n\n\n/***/ },\n\n/***/ 212:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar execute_cmd_1 = __webpack_require__(53);\n\tvar PageExecuteCmdController = (function () {\n\t    function PageExecuteCmdController($rootScope, $stateParams, $timeout, materilUtils, fxAction, toolbarUtils) {\n\t        this.$rootScope = $rootScope;\n\t        this.$stateParams = $stateParams;\n\t        this.$timeout = $timeout;\n\t        this.materilUtils = materilUtils;\n\t        this.fxAction = fxAction;\n\t        this.toolbarUtils = toolbarUtils;\n\t        this.executeResult = {};\n\t        this.key = execute_cmd_1.ExecuteCmdForm.key;\n\t        this.doInitToolbar();\n\t        this.formData = {\n\t            listIps: []\n\t        };\n\t    }\n\t    PageExecuteCmdController.prototype.doInitToolbar = function () {\n\t        this.toolbars = [\n\t            this.toolbarUtils.noneBuilder(\"icon\").iconBuilder('apple-keyboard-command', {}).toValue(),\n\t            this.toolbarUtils.labelBuilder('执行命令').attrBuilder({ flex: \"\" }).toValue()\n\t        ];\n\t    };\n\t    PageExecuteCmdController.prototype.doSubmit = function ($event, form) {\n\t        var _this = this;\n\t        var promise = this.fxAction.doAction(this.key, this.formData, form);\n\t        var results;\n\t        if (promise) {\n\t            this.isBusy = true;\n\t            promise.then(function (res) {\n\t                _this.materilUtils.showMsg(\"执行命令成功！\");\n\t                results = res;\n\t                return _this.fxAction.getModel(_this.key);\n\t            }).then(function (actionModel) {\n\t                _this.actionModel = actionModel;\n\t                return _this.fxAction.doDealResult(actionModel, results, _this.executeResult);\n\t            }).then(function (res) {\n\t                _this.$rootScope.$broadcast(\"showExecuteCmdResult\", res.data.cmdid);\n\t            }).finally(function () {\n\t                _this.isBusy = false;\n\t            });\n\t        }\n\t    };\n\t    PageExecuteCmdController.$inject = [\"$rootScope\", \"$stateParams\", \"$timeout\", \"materialUtils\", \"fxAction\", \"toolbarUtils\"];\n\t    return PageExecuteCmdController;\n\t}());\n\texports.PageExecuteCmdController = PageExecuteCmdController;\n\n\n/***/ },\n\n/***/ 214:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar ngMaterial = __webpack_require__(8);\n\tvar ngMaterialIcons = __webpack_require__(18);\n\tvar mdDataTable = __webpack_require__(77);\n\tvar router_1 = __webpack_require__(215);\n\tvar material_service_1 = __webpack_require__(32);\n\tvar rest_service_1 = __webpack_require__(33);\n\tvar action_1 = __webpack_require__(49);\n\tvar dycompile_1 = __webpack_require__(185);\n\tvar query_table_1 = __webpack_require__(192);\n\tvar compare_1 = __webpack_require__(182);\n\tvar execute_cmd_1 = __webpack_require__(53);\n\tvar execute_1 = __webpack_require__(187);\n\tvar pages_1 = __webpack_require__(190);\n\t__webpack_require__(81);\n\t__webpack_require__(73);\n\t__webpack_require__(165);\n\texports.module = angular.module(\"pageModule\", [pages_1.default, execute_1.default, compare_1.default, ngMaterialIcons, dycompile_1.default, action_1.default, mdDataTable, ngMaterial, 'ui.router', 'gridster', 'btford.socket-io', material_service_1.default, rest_service_1.default, query_table_1.default]);\n\texecute_cmd_1.default(exports.module);\n\texports.module.config([\n\t    \"$stateProvider\",\n\t    \"$urlRouterProvider\",\n\t    function ($stateProvider, $urlRouterProvider) {\n\t        router_1.initRouter($urlRouterProvider, $stateProvider);\n\t    }])\n\t    .run([\"$rootScope\", \"$state\", \"restUtils\", \"materialUtils\", \"fxAction\", function ($rootScope, $state, restUtils, materialUtils, fxAction) {\n\t        restUtils.setConfig(function (restAngularConfigure) {\n\t            restAngularConfigure.setErrorInterceptor(function (response) {\n\t                if (response.status !== 401) {\n\t                    response.data && materialUtils.showErrMsg(response.data.msg);\n\t                }\n\t            });\n\t        });\n\t        $rootScope.$on(\"executeCmdList:clickItem\", function (event, actionModel, item) {\n\t            if (actionModel.key === \"executeCmdResList-detail\") {\n\t                $rootScope.$broadcast(\"showExecuteCmdResult\", item._id);\n\t                actionModel.cancel = true;\n\t            }\n\t        });\n\t    }]);\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = \"\" + exports.module.name;\n\n\n/***/ }\n\n})\n\n\n/** WEBPACK FOOTER **\n ** 1.531a8fdf5c908dcf7f98.hot-update.js\n **/","import { IActionModel, ActionType } from '../../../directives/action/models/action.model';\nimport { MethodType } from '../../../directives/action/models/interface.model';\n\nexport class ExecuteCmdForm {\n    static key: string = \"execute.cmd\";\n\n    constructor() {\n        let actionModel: IActionModel = {\n            key: ExecuteCmdForm.key,\n            type: ActionType.form,\n            title: \"\",\n            icon: \"\",\n            form: {\n                dataSchema: {\n                    type: \"object\",\n                    required: [\"command\", \"listIps\"],\n                    properties: {\n                        command: {\n                            type: \"string\",\n                            title: \"命令\"\n                        },\n                        listIps: {\n                            type: \"array\",\n                            default: [],\n                            title: \"服务器列表\",\n                            minItems: 1,\n                            items: {\n                                type: \"object\"\n                            }\n                        }\n                    }\n                },\n                formSchema: [{\n                    key: \"command\",\n                    type: \"autocomplete-1\",\n                    placeHolder: \"请选择命令\",\n                    acOptions: {\n                        textField: \"title\",\n                        keyField: \"key\",\n                        dataField: \"rows\",\n                        noCache: true,\n                        search: \"/where/key/$like\",\n                        actionKey: \"command\"\n                    },\n                    htmlClass: \"md-block\"\n                }, {\n                    key: \"listIps\",\n                    type: \"querytable\",\n                    qtOptions: {\n                        key: \"devices\",\n                        resFilter: { \"query\": { \"and\": [{ \"term\": { \"online\": 1 } }] } }\n                    },\n                    startEmpty: true,\n                    htmlClass: \"md-block\"\n                }]\n            },\n            refreshList: true,\n            closeDialog: true,\n            interfaces: [{\n                key: \"execute.cmd\",\n                method: MethodType.POST,\n                address: \"\",\n                // port: \"\",\n                path: \"/commands/manual/test\",\n                jpp: {\n                    set: [{ \"from\": \"/queueItem\", \"to\": \"/data\" }]\n                },\n                // config: {\n                //     salt: true\n                // },\n                isRestful: false\n            }]\n        };\n\n        return actionModel;\n    }\n}\n\nexport default (module: ng.IModule) => {\n    const services = [ExecuteCmdForm];\n\n    _.each(services, (model) => {\n        module.service(model.key, model);\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/services/execute.cmd.ts\n **/","\nimport { IActionModel, ActionType, IClientData } from '../../../directives/action/models/action.model';\nimport { ExecuteCmdForm } from '../services/execute.cmd';\nimport * as _ from 'lodash';\n\nexport class PageExecuteCmdController {\n    static $inject = [\"$rootScope\", \"$stateParams\", \"$timeout\", \"materialUtils\", \"fxAction\", \"toolbarUtils\"];\n\n    key: string;\n    toolbars: Array<any>;\n    actionModel: IActionModel;\n    formData: any;\n    isBusy: boolean;\n    executeResult: any = {};\n\n    constructor(private $rootScope: angular.IRootScopeService, private $stateParams: ng.ui.IStateParamsService, private $timeout, private materilUtils: fx.utils.materialStatic, private fxAction, private toolbarUtils) {\n        this.key = ExecuteCmdForm.key;\n        this.doInitToolbar();\n        this.formData = {\n            listIps: []\n        };\n    }\n\n    doInitToolbar() {\n        this.toolbars = [\n            this.toolbarUtils.noneBuilder(\"icon\").iconBuilder('apple-keyboard-command', {}).toValue(),\n            this.toolbarUtils.labelBuilder('执行命令').attrBuilder({ flex: \"\" }).toValue()\n        ];\n    }\n\n    doSubmit($event, form) {\n        let promise = this.fxAction.doAction(this.key, this.formData, form);\n        let results;\n\n        if (promise) {\n            this.isBusy = true;\n            promise.then((res) => {\n                this.materilUtils.showMsg(\"执行命令成功！\");\n                results = res;\n\n                return this.fxAction.getModel(this.key);\n            }).then((actionModel) => {\n                this.actionModel = actionModel;\n\n                return this.fxAction.doDealResult(actionModel, results, this.executeResult);\n            }).then((res) => {\n                this.$rootScope.$broadcast(\"showExecuteCmdResult\", res.data.cmdid);\n            }).finally(() => {\n                this.isBusy = false;\n            });\n        }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/ctls/page.execute.cmd.ts\n **/","/**\n * Created by NICK on 16/8/16.\n * page页面,用户生成列表页和表单操作\n */\n\nimport * as ngMaterial from 'angular-material';\nimport uiRouter from 'angular-ui-router';\nimport * as ngMaterialIcons from 'angular-material-icons';\nimport * as mdDataTable from 'angular-material-data-table';\nimport * as Pointer from 'json-pointer';\n\nimport { initRouter } from './router';\nimport materialServiceMod from '../../services/material.service';\nimport restRegMod from '../../services/rest.service';\nimport actionDir from '../../directives/action';\nimport dyCompileMod from '../../directives/dycompile';\nimport queryTable from '../../directives/query.table';\nimport compareDir from '../../directives/compare';\nimport executeCmdFunc from './services/execute.cmd';\nimport executeMdlName from '../../directives/execute';\nimport pageMdlName from '../../directives/pages';\n\nimport 'angular-socket-io';\nimport 'angular-gridster';\nimport './index.scss';\n\nexport const module = angular.module(\"pageModule\", [pageMdlName,executeMdlName, compareDir, ngMaterialIcons, dyCompileMod, actionDir, mdDataTable, ngMaterial as string, 'ui.router', 'gridster', 'btford.socket-io', materialServiceMod, restRegMod, queryTable]);\n\nexecuteCmdFunc(module);\n\nmodule.config([\n    \"$stateProvider\",\n    \"$urlRouterProvider\",\n    ($stateProvider, $urlRouterProvider) => {\n        // 初始化路由\n        initRouter($urlRouterProvider, $stateProvider);\n    }])\n    .run([\"$rootScope\", \"$state\", \"restUtils\", \"materialUtils\", \"fxAction\", ($rootScope, $state, restUtils: fx.utils.restStatic, materialUtils: fx.utils.materialStatic, fxAction) => {\n        // 添加全局错误拦截器\n        restUtils.setConfig((restAngularConfigure: restangular.IProvider) => {\n            restAngularConfigure.setErrorInterceptor((response: restangular.IResponse) => {\n                if (response.status !== 401) {\n                    response.data && materialUtils.showErrMsg(response.data.msg);\n                }\n            });\n        });\n\n        $rootScope.$on(\"executeCmdList:clickItem\", (event, actionModel, item) => {\n            if (actionModel.key === \"executeCmdResList-detail\") {\n                $rootScope.$broadcast(\"showExecuteCmdResult\", item._id);\n                actionModel.cancel = true;\n            }\n            // alert(1);\n        });\n    }]);\n\nexport default `${module.name}`;\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/index.ts\n **/"],"sourceRoot":""}