webpackHotUpdate(0,{44:function(t,e,o){"use strict";function i(t){var e=t.fieldFrag.querySelector("[sf-layout]");e&&t.form.grid&&Object.getOwnPropertyNames(t.form.grid).forEach(function(o,i,r){e.setAttribute(o,t.form.grid[o])})}var r=o(7),n=o(6);o(88),o(135);var a=o(159),s=o(162),d=o(18),l=o(157),c=o(158),u=o(156),f=o(155),m=o(151),h=o(152),p=o(149),b=o(153),g=o(154),y=o(150),w=o(148),x=o(160),C=o(161);o(69),o(244),o(163);var M="fxAction",t=r.module(M+"Module",[n,d["default"],"schemaForm","ng.jsoneditor"]);s["default"](t),a["default"](t),m["default"](t),h["default"](t),c["default"](t),l["default"](t),p["default"](t),b["default"](t),g["default"](t),y["default"](t),w["default"](t),u["default"](t),f["default"](t),x["default"](t),C["default"](t),t.config(["sfErrorMessageProvider",function(t){t.setDefaultMessage("302","[{{title}}]是必填项"),t.setDefaultMessage("103","[{{title}}]超过了最大值{{schema.maximum}}"),t.setDefaultMessage("101","[{{title}}]小于最小值{{schema.minimum}}"),t.setDefaultMessage("200","[{{title}}]字符长度小于最小值({{schema.minLength}})"),t.setDefaultMessage("201","[{{title}}]字符长度大于最大值({{schema.maxLength}})"),t.setDefaultMessage("400","数组长度不正确，{{schema.minItems||0}}-{{schema.maxItems||'∞'}}"),t.setDefaultMessage("500","格式不正确")}]).config(["sfBuilderProvider","schemaFormDecoratorsProvider","jsonEditorBuilderProvider","autoCompleteBuilderProvider",function(t,e,o,r){e.defineAddOn("materialDecorator","jeditor","./decorators/jsoneditor.jade",t.stdBuilders.concat(o.builder)),e.defineAddOn("materialDecorator","card","./decorators/card.jade",[t.builders.sfField,t.builders.condition,t.builders.transclusion]),e.defineAddOn("materialDecorator","autocomplete-1","./decorators/autocomplete-1.jade",[t.builders.sfField,i,t.builders.condition,r.builder,t.builders.transclusion])}]).run(["$templateCache","autoCompleteBuilder",function(t){t.put("./decorators/jsoneditor.jade",o(102)()),t.put("./decorators/card.jade",o(101)()),t.put("./decorators/autocomplete-1.jade",o(100)()),t.put("./decorators/section-1.jade",o(103)())}]),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=t.name},154:function(t,e,o){"use strict";function i(){return{restrict:"EA",template:o(112)(),scope:!0,require:"^fxWizardAction",bindToController:{formData:"=ngModel",submitCallBack:"=?ngSubmit",key:"@"},controller:n,controllerAs:"wizardCtl",replace:!0,transclude:!0,link:function(t,e,o,i){t.$watch(function(){return i.key},function(){i.getActionModel()})}}}var r=o(5),n=function(){function t(t,e,o,i,r,n){var a=this;this.$scope=t,this.$timeout=e,this.fxAction=o,this.toolbarUtils=i,this.materialUtils=r,this.$mdDialog=n,this.isShow=!0,this.selectedIndex=0,this.initToolbar(),this.$scope.$on("$destroy",function(){a.formData=null,a.$forms=null,a.toolbars=null,a.actionModel=null})}return t.prototype.initForm=function(t,e){this.$forms||(this.$forms={}),this.$forms[t.key]=e[t.key+"Form"]},t.prototype.showForm=function(t,e){return 0===e||this.$forms.hasOwnProperty(t.key)||e==this.selectedIndex||e==this.selectedIndex+1},t.prototype.doCheckCurrentForm=function(t){var e=this.actionModel.wizard.actions[_.isUndefined(t)?this.selectedIndex:t];if(this.$forms){var o=this.$forms[""+e.key];if(!this.fxAction.doFormCheck(o))return!1}return!0},t.prototype.doCheckForms=function(){var t=this,e=!0;return _.each(this.actionModel.wizard.actions,function(o,i){if(e=t.doCheckCurrentForm(i),!e)return t.selectedIndex=i,!1}),e},t.prototype.reset=function(){var t=this;this.formData={},this.$forms={},this.selectedIndex=0,this.isShow=!1,this.$timeout(function(){t.isShow=!0},0)},t.prototype.initToolbar=function(){var t=this;this.toolbars=[this.toolbarUtils.btnBuilder("上一步",null,!0,"top").iconBuilder("navigate_before").conditionBuilder("wizardCtl.selectedIndex>0",!1).btnClick(function(e){t.selectedIndex&&t.selectedIndex--}).toValue(),this.toolbarUtils.btnBuilder("下一步",null,!0,"top").iconBuilder(null,null,"navigate_next").conditionBuilder("wizardCtl.selectedIndex < wizardCtl.actionModel.wizard.actions.length-1",!1).btnClick(function(e){t.doCheckCurrentForm()&&_.isArray(t.actionModel.wizard.actions)&&t.actionModel.wizard.actions.length>t.selectedIndex&&t.selectedIndex++}).toValue(),this.toolbarUtils.btnBuilder("完成","md-primary",!0,"top").iconBuilder("done_all").conditionBuilder("!wizardCtl.isBusy && wizardCtl.selectedIndex===wizardCtl.actionModel.wizard.actions.length-1",!1).btnClick(function(e){t.doCheckForms()&&(t.isBusy=!0,t.fxAction.doAction(t.actionModel.key,t.formData).then(function(e){t.actionModel.closeDialog===!0&&t.$mdDialog.hide(e),_.isFunction(t.submitCallBack)&&t.submitCallBack()})["finally"](function(){t.isBusy=!1}))}).toValue()]},t.prototype.getActionModel=function(){var t,e=this;this.fxAction.getModel(this.key).then(function(o){return t=_.cloneDeep(o),e.fxAction.getModels(o.wizard.actions)}).then(function(o){var i=[];_.each(t.wizard.actions,function(e){_.isString(e)&&(e=o[e]),!e||e.type!==r.ActionType.form&&e.type!==r.ActionType.wizard||(e.form.dataSchema||e.type!==r.ActionType.form||(e.form.dataSchema=t.wizard.defaultSchema.dataSchema),i.push(e))}),t.wizard.actions=i,e.actionModel=t})},t.$inject=["$scope","$timeout","fxAction","toolbarUtils","materialUtils","$mdDialog"],t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){t.directive("fxWizardAction",i)}}});
//# sourceMappingURL=0.3875b8bf1b7a0eb421ec.hot-update.js.map