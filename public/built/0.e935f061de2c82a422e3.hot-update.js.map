{"version":3,"sources":["webpack:///0.e935f061de2c82a422e3.hot-update.js","webpack:///./src/directives/sidemenu/index.ts?f08f","webpack:///./src/directives/sidemenu/status.factory.ts?37b0"],"names":["webpackHotUpdate","164","module","exports","__webpack_require__","Directive","mdSideMenuSections","restrict","replace","require","_name","transclude","controllerAs","scope","modules","bindToController","selectedNodes","controller","Controller","compile","$ele","$attr","childTranscludeFn","$scope","$element","attrs","$ctrl","$watch","newValue","opts","options","_","isArray","angular","isDefined","node","equals","children","template","clone","html","append","$sideMenuTransclude","section_provider_1","content_directive_1","child_directive_1","mdcolor_directive_1","search_directive_1","status_factory_1","_module","$compile","$interpolate","this","console","log","arguments","prototype","showChildren","hasOwnProperty","key","length","isShowChildren","isLeaf","rgt","lft","isSelected","selectedNode","$inject","directive","Object","defineProperty","value","name","171","Factory","$rootScope","onStateChangeStart","event","toState","toParams","digest","sections","currentSection","forEach","section","isShow","menuLink","search","location","hash","setTimeout","$on","factory"],"mappings":"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","file":"0.e935f061de2c82a422e3.hot-update.js","sourcesContent":["webpackHotUpdate(0,{\n\n/***/ 164:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar _ = __webpack_require__(33);\n\tvar section_provider_1 = __webpack_require__(165);\n\tvar content_directive_1 = __webpack_require__(166);\n\tvar child_directive_1 = __webpack_require__(167);\n\tvar mdcolor_directive_1 = __webpack_require__(168);\n\tvar search_directive_1 = __webpack_require__(169);\n\tvar status_factory_1 = __webpack_require__(171);\n\t__webpack_require__(172);\n\tvar _name = \"fxSideMenu\", _module = _name + \"Module\";\n\tvar Controller = (function () {\n\t    function Controller($scope, $compile, $interpolate, mdSideMenuSections) {\n\t        this.$scope = $scope;\n\t        this.$compile = $compile;\n\t        this.$interpolate = $interpolate;\n\t        this.mdSideMenuSections = mdSideMenuSections;\n\t        this.options = {};\n\t        console.log(\"----\", arguments);\n\t        this.template = $compile($interpolate(__webpack_require__(174)())({\n\t            opts: mdSideMenuSections.options\n\t        }));\n\t        this.options = this.mdSideMenuSections.options;\n\t    }\n\t    Controller.prototype.showChildren = function (node) {\n\t        var opts = this.mdSideMenuSections.options;\n\t        if (this.selectedNodes.hasOwnProperty(node[opts.key])) {\n\t            delete this.selectedNodes[node[opts.key]];\n\t        }\n\t        else {\n\t            if (node[opts.children] && node[opts.children].length) {\n\t                this.selectedNodes[node[opts.key]] = node;\n\t            }\n\t        }\n\t    };\n\t    Controller.prototype.isShowChildren = function (node) {\n\t        var opts = this.mdSideMenuSections.options;\n\t        return !!this.selectedNodes[node[opts.key]];\n\t    };\n\t    Controller.prototype.isLeaf = function (node) {\n\t        var opts = this.mdSideMenuSections.options;\n\t        return node.rgt - node.lft == 1 || !node[opts.children] || node[opts.children].length == 0;\n\t    };\n\t    Controller.prototype.isSelected = function (node) {\n\t        var opts = this.mdSideMenuSections.options;\n\t        return !!this.mdSideMenuSections.selectedNode && this.mdSideMenuSections.selectedNode[opts.key] == node[opts.key];\n\t    };\n\t    Controller.$inject = [\"$scope\", \"$compile\", \"$interpolate\", \"mdSideMenuSections\"];\n\t    return Controller;\n\t}());\n\tfunction Directive(mdSideMenuSections) {\n\t    return {\n\t        restrict: 'EA',\n\t        replace: false,\n\t        require: _name,\n\t        transclude: true,\n\t        controllerAs: \"sideCtl\",\n\t        scope: {\n\t            modules: '='\n\t        },\n\t        bindToController: {\n\t            selectedNodes: '='\n\t        },\n\t        controller: Controller,\n\t        compile: function ($ele, $attr, childTranscludeFn) {\n\t            return function ($scope, $element, attrs, $ctrl) {\n\t                $scope.$watch(\"modules\", function updateNodeOnRootScope(newValue) {\n\t                    var opts = mdSideMenuSections.options;\n\t                    if (_.isArray(newValue)) {\n\t                        if (angular.isDefined($scope.node) && angular.equals($scope.node[opts.children], newValue)) {\n\t                            return;\n\t                        }\n\t                        $scope.node = {};\n\t                        $scope.node[opts.children] = newValue;\n\t                    }\n\t                    else {\n\t                        if (angular.equals($scope.node, newValue)) {\n\t                            return;\n\t                        }\n\t                        $scope.node = newValue;\n\t                    }\n\t                });\n\t                $ctrl.template($scope, function (clone) {\n\t                    $element.html('').append(clone);\n\t                });\n\t                $scope.$sideMenuTransclude = childTranscludeFn;\n\t            };\n\t        }\n\t    };\n\t}\n\tvar module = angular.module(_module, [\"ngAnimate\", \"ngMaterial\"]).directive(_name, [\"mdSideMenuSections\", Directive]);\n\tsection_provider_1.default(module);\n\tcontent_directive_1.default(module);\n\tchild_directive_1.default(module);\n\tmdcolor_directive_1.default(module);\n\tsearch_directive_1.default(module);\n\tstatus_factory_1.default(module);\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = module.name;\n\n\n/***/ },\n\n/***/ 171:\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tfunction Factory($rootScope, mdSideMenuSections) {\n\t    var onStateChangeStart = function (event, toState, toParams) {\n\t        function digest(sections, currentSection) {\n\t            !mdSideMenuSections.selectedNode && sections.forEach(function (section) {\n\t                if (section[mdSideMenuSections.options.children] && section[mdSideMenuSections.options.children].length) {\n\t                    return digest(section[mdSideMenuSections.options.children], section);\n\t                }\n\t                if (section.isShow && section.menuLink.search(location.hash) >= 0) {\n\t                    mdSideMenuSections.selectedNode = section;\n\t                    return false;\n\t                }\n\t            });\n\t            return false;\n\t        }\n\t        mdSideMenuSections.selectedNode = null;\n\t        setTimeout(function () {\n\t            digest(mdSideMenuSections.sections, null);\n\t        }, 10);\n\t    };\n\t    $rootScope.$on('$stateChangeSuccess', onStateChangeStart);\n\t    return {\n\t        onStateChangeStart: onStateChangeStart\n\t    };\n\t}\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = function (module) {\n\t    module.factory('fxSideMenuFactory', [\"$rootScope\", \"mdSideMenuSections\", Factory]);\n\t};\n\n\n/***/ }\n\n})\n\n\n/** WEBPACK FOOTER **\n ** 0.e935f061de2c82a422e3.hot-update.js\n **/","/**\n * Created by NICK on 16/8/16.\n */\n\nimport * as _ from 'lodash';\nimport section from './section.provider';\nimport content from './content.directive';\nimport child from './child.directive';\nimport mdColor from './mdcolor.directive';\nimport search from './search.directive';\nimport status from './status.factory';\n\nimport \"./styles/sidemenu.scss\";\n\nconst _name = \"fxSideMenu\", _module = `${_name}Module`;\n\ninterface IDirectiveScope extends ng.IScope {\n    node: Object;\n    $sideMenuTransclude: Object;\n}\n\nclass Controller {\n    static $inject = [\"$scope\", \"$compile\", \"$interpolate\", \"mdSideMenuSections\"];\n\n    template: any;\n    selectedNodes: Object;\n    options: Object = {};\n\n    constructor(private $scope, private $compile, private $interpolate, private mdSideMenuSections) {\n\n        console.log(\"----\", arguments);\n\n        this.template = $compile($interpolate(require(\"./tpls/sidemenu.jade\")())({\n            opts: mdSideMenuSections.options\n        }));\n\n        this.options = this.mdSideMenuSections.options;\n    }\n\n    /**\n     * 显示和隐藏子菜单\n     * @param node   {Object} 菜单的数据\n     */\n    showChildren(node) {\n        let opts = this.mdSideMenuSections.options;\n\n        if (this.selectedNodes.hasOwnProperty(node[opts.key])) {\n            delete this.selectedNodes[node[opts.key]];\n        } else {\n            if (node[opts.children] && node[opts.children].length) {\n                this.selectedNodes[node[opts.key]] = node;\n            }\n        }\n    }\n\n    /**\n     * 子节点是否显示\n     * @param node {Object} 菜单的数据\n     * @returns {boolean}\n     */\n    isShowChildren(node) {\n        let opts = this.mdSideMenuSections.options;\n\n        return !!this.selectedNodes[node[opts.key]];\n    }\n\n    /**\n     * 判断是否是叶子节点\n     * @param node   {Object} 菜单的数据\n     * @returns {boolean}\n     */\n    isLeaf(node) {\n        let opts = this.mdSideMenuSections.options;\n\n        return node.rgt - node.lft == 1 || !node[opts.children] || node[opts.children].length == 0;\n    }\n\n    /**\n     * 是否选中\n     * @param node    {Object} 菜单的数据\n     * @returns {boolean}\n     */\n    isSelected(node) {\n        let opts = this.mdSideMenuSections.options;\n\n        return !!this.mdSideMenuSections.selectedNode && this.mdSideMenuSections.selectedNode[opts.key] == node[opts.key];\n    }\n\n}\n\n\n/**\n * sidemenu指令\n * @param mdSideMenuSections\n * @returns {{restrict: string, replace: boolean, require: string, transclude: boolean, controllerAs: string, scope: {modules: string}, bindToController: {selectedNodes: string}, controller: Controller, compile: (($ele:ng.IAugmentedJQuery, $attr:ng.IAttributes, childTranscludeFn:any)=>($scope:IDirectiveScope, $element:any, attrs:any, $ctrl:any)=>undefined)}}\n * @constructor\n */\nfunction Directive(mdSideMenuSections): ng.IDirective {\n    return {\n        restrict: 'EA',\n        replace: false,\n        require: _name,\n        transclude: true,\n        controllerAs: \"sideCtl\",\n        scope: {\n            modules: '='\n        },\n        bindToController: {\n            selectedNodes: '='\n        },\n        controller: Controller,\n        compile: ($ele: ng.IAugmentedJQuery, $attr: ng.IAttributes, childTranscludeFn)=> {\n            return ($scope: IDirectiveScope, $element, attrs, $ctrl)=> {\n                // 监听modules的变化,初始化根节点数据\n                $scope.$watch(\"modules\", function updateNodeOnRootScope(newValue) {\n                    let opts = mdSideMenuSections.options;\n\n                    if (_.isArray(newValue)) {\n                        if (angular.isDefined($scope.node) && angular.equals($scope.node[opts.children], newValue)) {\n                            return;\n                        }\n                        $scope.node = {};\n                        $scope.node[opts.children] = newValue;\n                    }\n                    else {\n                        if (angular.equals($scope.node, newValue)) {\n                            return;\n                        }\n                        $scope.node = newValue;\n                    }\n                });\n                // 应用模板\n                $ctrl.template($scope, function (clone) {\n                    $element.html('').append(clone);\n                });\n                $scope.$sideMenuTransclude = childTranscludeFn;\n            };\n        }\n    };\n}\n\nconst module = angular.module(_module, [\"ngAnimate\", \"ngMaterial\"]).directive(_name, [\"mdSideMenuSections\", Directive]);\n\nsection(module);\ncontent(module);\nchild(module);\nmdColor(module);\nsearch(module);\nstatus(module);\n\nexport default module.name;\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/sidemenu/index.ts\n **/","function Factory($rootScope, mdSideMenuSections): any {\n    let onStateChangeStart = function (event, toState, toParams) {\n        function digest(sections, currentSection) {\n            !mdSideMenuSections.selectedNode && sections.forEach(function (section) {\n                if (section[mdSideMenuSections.options.children] && section[mdSideMenuSections.options.children].length) {\n                    return digest(section[mdSideMenuSections.options.children], section);\n                }\n                if (section.isShow && section.menuLink.search(location.hash) >= 0) {\n                    mdSideMenuSections.selectedNode = section;\n                    return false;\n                }\n            });\n\n            return false;\n        }\n\n        mdSideMenuSections.selectedNode = null;\n        setTimeout(function () {\n            digest(mdSideMenuSections.sections, null);\n        }, 10);\n    };\n    $rootScope.$on('$stateChangeSuccess', onStateChangeStart);\n\n    return {\n        onStateChangeStart: onStateChangeStart\n    };\n}\n\nexport default (module: ng.IModule)=> {\n    module.factory('fxSideMenuFactory', [\"$rootScope\", \"mdSideMenuSections\", Factory]);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/sidemenu/status.factory.ts\n **/"],"sourceRoot":""}