{"version":3,"sources":["webpack:///./src/pages/page/router.ts?0e30","webpack:///./src/pages/page/ctls/page.d3.controller.ts?28a4"],"names":[],"mappings":"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","file":"0.571405fbb844c3d5ac13.hot-update.js","sourcesContent":["/**\n * Created by NICK on 16/8/9.\n */\n\nimport {PageController} from './ctls/page.controller';\nimport {D3Controller} from './ctls/page.d3.controller';\n\nexport const initRouter = ($urlRouterProvider, $stateProvider) => {\n    // 路由规则\n    $stateProvider.state(\"home.page\", {\n        url: \"page/:key\",\n        data: {\n            permissions: {\n                except: [\"anonymous\"],\n                only: [\"user\"]\n            }\n        },\n        views: {\n            \"content\": {\n                controller: PageController,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.template.jade\")()\n            }\n        }\n    }).state('home.d3', {\n        url: \"d3\",\n        views: {\n            \"content\": {\n                controller: D3Controller,\n                controllerAs: \"pageCtl\",\n                template: \"<svg flex id='homed3'></svg>\"\n            }\n        }\n    });\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/router.ts\n **/","/**\n * Created by NICK on 16/8/10.\n */\n\nimport * as d3 from 'd3';\nimport * as _ from 'lodash';\n\nexport class D3Controller {\n    static $inject = [\"$stateParams\"];\n\n    constructor(private $stateParams: ng.ui.IStateParamsService) {\n        // const width = innerWidth || Math.max(960, innerWidth),\n        //     height = innerHeight || Math.max(500, innerHeight);\n        // const svg = d3.select(\"#homed3\");\n        // let i = 0;\n\n        // svg.append(\"rect\")\n        //     .attr(\"width\", width)\n        //     .attr(\"height\", height)\n        //     .on(\"ontouchstart\" in document ? \"touchmove\" : \"mousemove\", particle);\n\n        // function particle() {\n        //     var m = d3.mouse(this);\n\n        //     svg.insert(\"circle\", \"rect\")\n        //         .attr(\"cx\", m[0])\n        //         .attr(\"cy\", m[1])\n        //         .attr(\"r\", 1e-6)\n        //         .style(\"stroke\", d3.hsl((i = (i + 1) % 360), 1, 0.5).toString())\n        //         .style(\"stroke-opacity\", 1)\n        //         .transition()\n        //         .duration(2000)\n        //         .ease(Math.sqrt)\n        //         .attr(\"r\", 100)\n        //         .style(\"stroke-opacity\", 1e-6)\n        //         .remove();\n\n        //     (d3.event as Event).preventDefault();\n        // }\n\n        this.drawSuits();\n    }\n\n    drawSuits() {\n        var nodes = [{ name: \"BeiJing\" }, { name: \"XiaMen\" },\n        { name: \"XiAn\" }, { name: \"HangZhou\" },\n        { name: \"ShangHai\" }, { name: \"QingDao\" },\n        { name: \"NanJing\" }];\n\n        var links = [{ source: 0, target: 1 }, { source: 0, target: 2 },\n        { source: 0, target: 3 }, { source: 1, target: 4 },\n        { source: 1, target: 5 }, { source: 1, target: 6 }];\n\n        const width = innerWidth || Math.max(960, innerWidth),\n            height = innerHeight || Math.max(500, innerHeight);\n        var svg = d3.select(\"#homed3\")\n            .append(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height);\n\n        // 通过布局来转换数据，然后进行绘制\n        var simulation = d3.forceSimulation(nodes)\n            .force(\"link\", d3.forceLink(links).distance(100))\n            .force(\"charge\", d3.forceManyBody())\n            .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n        var color = d3.scaleOrdinal(d3.schemeCategory20);\n        // 绘制\n        var svg_links = svg.selectAll(\"line\")\n            .data(links)\n            .enter()\n            .append(\"marker\")\n            .style(\"markerUnits\", \"strokeWidth\")\n            .style(\"markerWidth\", \"12\")\n            .style(\"markerHeight\", \"12\")\n            .style(\"viewBox\", \"0 0 12 12\")\n            .style(\"refX\", \"6\")\n            .style(\"refY\", \"6\")\n            .style(\"orient\", \"auto\");\n\n        var svg_nodes = svg.selectAll(\"circle\")\n            .data(nodes)\n            .enter()\n            .append(\"circle\")\n            .attr(\"r\", 20)\n            .style(\"fill\", function (d, i: any) {\n                return color(i);\n            })\n            .attr(\"cx\", function (d: any) { return d.x; })\n            .attr(\"cy\", function (d: any) { return d.y; });\n\n        var svg_text = svg.selectAll(\"text\")\n            .data(nodes)\n            .enter()\n            .append(\"text\")\n            .style(\"fill\", \"#000\")\n            .attr(\"dx\", 20)\n            .attr(\"dy\", 10)\n            .text(function (d) { return d.name; });\n\n        function draw() {\n            svg_nodes\n                .attr(\"cx\", function (d: any) { return d.x; })\n                .attr(\"cy\", function (d: any) { return d.y; });\n\n            svg_text\n                .attr(\"x\", function (d: any) { return d.x; })\n                .attr(\"y\", function (d: any) { return d.y; });\n\n            svg_links\n                .attr(\"x1\", function (d: any) { return d.source.x; })\n                .attr(\"y1\", function (d: any) { return d.source.y; })\n                .attr(\"x2\", function (d: any) { return d.target.x; })\n                .attr(\"y2\", function (d: any) { return d.target.y; });\n        }\n        simulation.on(\"tick\", draw);\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/ctls/page.d3.controller.ts\n **/"],"sourceRoot":""}