{"version":3,"sources":["webpack:///./src/directives/action/index.ts?1f08","webpack:///./src/directives/action/directives/autocomplete.directive.ts?1b99"],"names":[],"mappings":"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","file":"0.45634de5b896ae97abc6.hot-update.js","sourcesContent":["/**\n * Created by NICK on 16/8/9.\n */\n\nimport * as angular from 'angular';\nimport * as ngMaterial from 'angular-material';\nimport 'expose?JSONEditor!jsoneditor';\nimport 'ng-jsoneditor';\n\nimport actProviderRegFunc from './services/action.provider';\nimport actUtilsFunc from './services/utils.service';\nimport restSvrMod from '../../services/rest.service';\nimport moduleSchFunc from './schemas/modules.value';\nimport commonSchFunc from './schemas/common.value';\nimport backupFunc from './schemas/backup.value';\nimport schemaFunc from './schemas/schema.value';\nimport actionFunc from './schemas/action.value';\nimport formActionFunc from './directives/form.directive';\nimport listActionFunc from './directives/list.directive';\nimport autoCompleteActionFunc from './directives/autocomplete.directive';\nimport dialogFormFunc from './directives/dialog-form.directive';\nimport searchActionFunc from './directives/search.directive';\nimport wizardActionFunc from './directives/wizard.directive';\nimport wizardDialogActionFunc from './directives/dialog-wizard.directive';\nimport builderActionFunc from './directives/builder.directive';\n\nimport autoCompleteFunc from './services/autocomplete.provider';\nimport jsonEditorFunc from './services/jsoneditor.provider';\n\nimport 'angular-schema-form';\nimport 'angular-schema-form-ng-material';\nimport './services/validator.custom.value';\n\nconst _name = \"fxAction\";\nconst module = angular.module(`${_name}Module`, [ngMaterial, restSvrMod, \"schemaForm\", \"ng.jsoneditor\"]);\n\nactUtilsFunc(module);\nactProviderRegFunc(module);\nformActionFunc(module);\nlistActionFunc(module);\nmoduleSchFunc(module);\ndialogFormFunc(module);\nsearchActionFunc(module);\nwizardActionFunc(module);\nwizardDialogActionFunc(module);\nbuilderActionFunc(module);\ncommonSchFunc(module);\nautoCompleteFunc(module);\njsonEditorFunc(module);\nbackupFunc(module);\nschemaFunc(module);\nactionFunc(module);\nautoCompleteActionFunc(module);\n\nfunction sfLayout(args) {\n    var layoutDiv = args.fieldFrag.querySelector('[sf-layout]');\n\n    if (layoutDiv && args.form.grid) {\n        Object.getOwnPropertyNames(args.form.grid).forEach(function (property, idx, array) {\n            layoutDiv.setAttribute(property, args.form.grid[property]);\n        });\n    }\n};\n// 处理默认的错误信息\nmodule\n    .config([\"sfErrorMessageProvider\", (sfErrorMessageProvider) => {\n        // sfErrorMessageProvider.setDefaultMessage(\"10000\", \"邮箱格式不正确\");\n        // sfErrorMessageProvider.setDefaultMessage(\"10001\", \"两次密码不一致\");\n        // sfErrorMessageProvider.setDefaultMessage(\"10002\", \"用户名中存在非法字符\");\n        // sfErrorMessageProvider.setDefaultMessage(\"10003\", \"手机格式不正确\");\n        // sfErrorMessageProvider.setDefaultMessage(\"10004\", \"JSON格式不正确\");\n        // sfErrorMessageProvider.setDefaultMessage(\"10005\", \"地址格式不正确\");\n        sfErrorMessageProvider.setDefaultMessage(\"302\", \"[{{title}}]是必填项\");\n        sfErrorMessageProvider.setDefaultMessage(\"103\", \"[{{title}}]超过了最大值{{schema.maximum}}\");\n        sfErrorMessageProvider.setDefaultMessage(\"101\", \"[{{title}}]小于最小值{{schema.minimum}}\");\n        sfErrorMessageProvider.setDefaultMessage(\"200\", \"[{{title}}]字符长度小于最小值({{schema.minLength}})\");\n        sfErrorMessageProvider.setDefaultMessage(\"201\", \"[{{title}}]字符长度大于最大值({{schema.maxLength}})\");\n        sfErrorMessageProvider.setDefaultMessage(\"400\", \"数组长度不正确，{{schema.minItems||0}}-{{schema.maxItems||'∞'}}\");\n        sfErrorMessageProvider.setDefaultMessage(\"500\", \"格式不正确\");\n    }])\n    // 添加自定义的表单组件\n    .config([\"sfBuilderProvider\", \"schemaFormDecoratorsProvider\", \"jsonEditorBuilderProvider\", \"autoCompleteBuilderProvider\", (sfBuilderProvider, schemaFormDecoratorsProvider, jsonEditorBuilder, autoCompleteBuilder) => {\n        // jsoneditor--schema-form组件化\n        schemaFormDecoratorsProvider.defineAddOn(\n            'materialDecorator',\n            'jeditor',\n            \"./decorators/jsoneditor.jade\",\n            sfBuilderProvider.stdBuilders.concat(jsonEditorBuilder.builder)\n        );\n        // card--schema-form组件化\n        schemaFormDecoratorsProvider.defineAddOn(\n            'materialDecorator',\n            'card',\n            \"./decorators/card.jade\",\n            [sfBuilderProvider.builders.sfField, sfBuilderProvider.builders.condition, sfBuilderProvider.builders.transclusion]\n        );\n        // autocomplete--schema-form组件化\n        schemaFormDecoratorsProvider.defineAddOn(\n            'materialDecorator',\n            'autocomplete-1',\n            \"./decorators/autocomplete-1.jade\",\n            [sfBuilderProvider.builders.sfField, sfBuilderProvider.builders.ngModel, sfLayout, sfBuilderProvider.builders.condition, sfBuilderProvider.builders.transclusion, autoCompleteBuilder.builder]\n        );\n    }])\n    // 打包工具的原因,只能把模板字符串写入cache中\n    .run([\"$templateCache\", \"autoCompleteBuilder\", ($templateCache: ng.ITemplateCacheService) => {\n        $templateCache.put('./decorators/jsoneditor.jade', require(\"./decorators/jsoneditor.jade\")());\n        $templateCache.put('./decorators/card.jade', require(\"./decorators/card.jade\")());\n        $templateCache.put('./decorators/autocomplete-1.jade', require(\"./decorators/autocomplete-1.jade\")());\n        $templateCache.put('./decorators/section-1.jade', require(\"./decorators/section-1.jade\")());\n    }]);\n\n\nexport default module.name;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/action/index.ts\n **/","import * as _ from 'lodash';\nimport * as pointer from 'json-pointer';\n\nconst _name = \"fxAutocompleteBoost\";\n\nclass Builder {\n    searchText: string;\n    selected: any;\n\n    constructor(private form, private fxAction) {\n\n    }\n\n    init(modelValue) {\n        this.form.acOptions = _.extend({\n            textField: \"\",\n            keyField: \"\",\n            dataField: \"\",\n            noCache: false,\n            _where: {},\n            search: \"\",\n            actionKey: \"\"\n        }, this.form.acOptions || {});\n\n        if (!_.isEmpty(modelValue)) {\n            this.selected = modelValue;\n        }\n    }\n\n    /**\n     * 当数据变化时，触发事件\n     * @param item 更改后的item\n     */\n    onChange(item, formData) {\n        console.log(item);\n        if (_.isEmpty(item)) {\n            return;\n        }\n        this.selected = item;\n        if (this.form.acOptions.keyField) {\n            if (pointer.has(item, `/${this.form.acOptions.keyField}`)) {\n                return pointer.set(formData, `/${this.form.key.join('/')}`, pointer.get(item, `/${this.form.acOptions.keyField}`));\n            } else {\n                return console.error(`autocomplete-1-没有在item中找到${this.form.acOptions.keyField}`);\n            }\n        }\n        pointer.set(formData, `/${this.form.key.join('/')}`, item);\n    }\n\n    /**\n     * 查询数据，如果存在actionKey，则获取actionKey中的interface数据\n     * 查询接口，返回数据\n     * @returns {any}\n     */\n    query() {\n        let actionModel, clientData = {};\n        let filter = {};\n\n        if (this.form.acOptions.actionKey) {\n            // 设置搜索条件\n            pointer.set(filter, this.form.acOptions.search, this.searchText);\n            // 设置全局条件\n            _.forEach(this.form.acOptions._where, (val, key) => {\n                pointer.set(filter, key, val);\n            });\n            return this.fxAction.getModel(this.form.acOptions.actionKey).then((aModel) => {\n                actionModel = aModel;\n                return this.fxAction.doAction(actionModel.key, filter);\n            }).then((results) => {\n                return this.fxAction.doDealResult(actionModel, results, clientData);\n            }).then((results) => {\n                return results[this.form.acOptions.dataField];\n            });\n        }\n\n        return this.form.data || [];\n    }\n}\n\nclass Controller {\n    static $inject = [\"$scope\", \"fxAction\"];\n\n    constructor(private $scope, private fxAction) {\n        let onChange = null;\n        let formWithIndex = $scope.copyWithIndex($scope.$index);\n\n        formWithIndex = _.first(_.filter(formWithIndex.items, (item) => {\n            return item['key'].join('') === $scope.form[\"key\"].join('') ||\n                _.filter(item['key'], (key) => {\n                    return key && !_.isNumber(key);\n                }).join('') === $scope.form[\"key\"].join('');\n        }));\n\n        $scope.boost = new Builder(formWithIndex ? formWithIndex : $scope.form, fxAction);\n        onChange = $scope.boost.onChange.bind($scope.boost);\n        $scope.boost.onChange = (item, formData) => {\n            onChange(item, formData);\n            // if ($scope.hasOwnProperty(\"item\")) {\n            //     $scope.item = item;\n            // }\n        };\n    }\n}\n\n/**\n * 操作指令,某个表单操作\n * @returns {{restrict: string, template: any, scope: {}, replace: boolean, link: (($scope:IDirectiveScope))}}\n * @constructor\n */\nfunction Directive(): ng.IDirective {\n    return {\n        restrict: 'A',\n        scope: false,\n        controller: Controller,\n        replace: false\n    };\n\n}\n\nDirective.$inject = [];\n\nexport default (module: ng.IModule) => {\n    module.directive(_name, Directive);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/action/directives/autocomplete.directive.ts\n **/"],"sourceRoot":""}