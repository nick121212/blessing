{"version":3,"sources":["webpack:///./src/pages/salt/router.ts?7c0c","webpack:///./src/pages/salt/ctls/index.controller.ts?7eed"],"names":[],"mappings":"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","file":"0.ee8dfd54b99e3e15ca24.hot-update.js","sourcesContent":["/**\n * Created by NICK on 16/8/9.\n */\n\nimport {SaltController} from './ctls/index.controller';\n\nexport const initRouter = ($urlRouterProvider, $stateProvider) => {\n    // 路由规则\n    $stateProvider.state(\"home.salt\", {\n        url: \"salt/:key\",\n        data: {\n            permissions: {\n                except: [\"anonymous\"],\n                only: [\"user\"]\n            }\n        },\n        views: {\n            \"content\": {\n                controller: SaltController,\n                controllerAs: \"saltCtl\",\n                template: require(\"./tpls/index.template.jade\")()\n            }\n        }\n    });\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/salt/router.ts\n **/","import * as io from 'socket.io-client';\nimport * as _ from 'lodash';\n\nexport class SaltController {\n    static $inject = [\"$rootScope\", \"$scope\", \"$stateParams\", \"toolbarUtils\", \"materialUtils\", \"fxAction\", \"restUtils\"];\n\n    toolbar: Array<Object>;\n    toolbarTest: Array<Object>;\n    socket: SocketIOClient.Socket;\n\n    constructor(private $rootScope:ng.IRootScopeService, private $scope: ng.IScope, private $stateParams: ng.ui.IStateParamsService, private toolbarUtils, private materialUtils: fx.utils.materialStatic, private fxAction, private restUtils: fx.utils.restStatic) {\n        this.toolbar = [\n            this.toolbarUtils.noneBuilder(\"icon\").iconBuilder('power-socket', {fill: \"black\"}).toValue(),\n            this.toolbarUtils.labelBuilder('SALT-API').attrBuilder({flex: \"\"}).toValue()\n        ];\n\n        this.fxAction.getModels([\"saltApiRun\", \"saltApiRun1\", \"saltApiStats\", \"saltApiLogin\", \"saltApiLogout\", \"saltApiMinions\", \"saltApiJobs\"]).then((actionModels)=> {\n            this.toolbarTest = [];\n            _.forEach(actionModels, (actionModel)=> {\n                this.toolbarTest.push(\n                    this.toolbarUtils.btnBuilder(actionModel.title, \"md-button\", true).iconBuilder(actionModel.icon, {}).btnClick(($event)=> {\n                        this.fxAction.doActionModel($event, actionModel, null, (result)=> {\n                            return this.fxAction.getModel(\"resultAction\").then((actionModelResult)=> {\n                                this.fxAction.doActionModel($event, actionModelResult, this.fxAction.doDealResult(actionModel, result, {}), ()=> {\n                                    this.materialUtils.close();\n                                });\n                            });\n                        });\n                    }).toValue()\n                );\n            });\n        });\n\n        this.$rootScope.$on(\"saltLoginEvent\", (event, data)=> {\n            this.initEvents(data);\n        });\n    }\n\n    initEvents(data) {\n        var source = new window[\"EventSource\"]('https://172.16.140.164:8888/events/' + data.return[0].token);\n\n        source.onopen = function () {\n            console.debug('opening')\n        };\n        source.onerror = function (e) {\n            console.debug('error!', e)\n        };\n        source.onmessage = function (e) {\n            console.debug(e.data)\n        };\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/salt/ctls/index.controller.ts\n **/"],"sourceRoot":""}