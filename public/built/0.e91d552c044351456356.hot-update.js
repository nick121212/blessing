webpackHotUpdate(0,{44:function(e,t,r){"use strict";function i(e){var t=e.fieldFrag.querySelector("[sf-layout]");t&&e.form.grid&&Object.getOwnPropertyNames(e.form.grid).forEach(function(r,i,a){t.setAttribute(r,e.form.grid[r])})}var a=r(7),o=r(6);r(88),r(135);var l=r(159),s=r(162),n=r(18),c=r(157),y=r(158),p=r(156),d=r(155),m=r(151),u=r(152),k=r(149),f=r(153),h=r(154),g=r(150),b=r(148),w=r(160),x=r(161);r(69),r(244),r(163);var S="fxAction",e=a.module(S+"Module",[o,n["default"],"schemaForm","ng.jsoneditor"]);s["default"](e),l["default"](e),m["default"](e),u["default"](e),y["default"](e),c["default"](e),k["default"](e),f["default"](e),h["default"](e),g["default"](e),b["default"](e),p["default"](e),d["default"](e),w["default"](e),x["default"](e),e.config(["sfErrorMessageProvider",function(e){e.setDefaultMessage("302","[{{title}}]是必填项"),e.setDefaultMessage("103","[{{title}}]超过了最大值{{schema.maximum}}"),e.setDefaultMessage("101","[{{title}}]小于最小值{{schema.minimum}}"),e.setDefaultMessage("200","[{{title}}]字符长度小于最小值({{schema.minLength}})"),e.setDefaultMessage("201","[{{title}}]字符长度大于最大值({{schema.maxLength}})"),e.setDefaultMessage("400","数组长度不正确，{{schema.minItems||0}}-{{schema.maxItems||'∞'}}"),e.setDefaultMessage("500","格式不正确")}]).config(["sfBuilderProvider","schemaFormDecoratorsProvider","jsonEditorBuilderProvider","autoCompleteBuilderProvider",function(e,t,r,a){t.defineAddOn("materialDecorator","jeditor","./decorators/jsoneditor.jade",e.stdBuilders.concat(r.builder)),t.defineAddOn("materialDecorator","card","./decorators/card.jade",[e.builders.sfField,e.builders.condition,e.builders.transclusion]),t.defineAddOn("materialDecorator","autocomplete-1","./decorators/autocomplete-1.jade",[e.builders.sfField,i,e.builders.condition,a.builder,e.builders.transclusion])}]).run(["$templateCache","autoCompleteBuilder",function(e){e.put("./decorators/jsoneditor.jade",r(102)()),e.put("./decorators/card.jade",r(101)()),e.put("./decorators/autocomplete-1.jade",r(100)()),e.put("./decorators/section-1.jade",r(103)())}]),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=e.name},156:function(e,t,r){"use strict";var i=r(5),a=r(16),o={type:"object",required:["key","host","interval"],properties:{key:{type:"string",title:"KEY"},host:{type:"string",title:"主HOST"},domainWhiteList:{type:"array",title:"域名白名单","default":[],items:{type:"string",format:"url-ip",title:"域名或者IP"}},whitePathList:{type:"array",title:"路径白名单","default":[],items:{type:"object",title:"路径配置",required:["regexp","scope"],properties:{enable:{type:"boolean",title:"是否启用"},regexp:{type:"string",title:"正则规则"},scope:{type:"string",title:"修饰符"},description:{type:"string",title:"介绍"}}}},interval:{type:"number","default":1e3,minimum:1e3,title:"下载间隔，单位ms"},downloader:{type:"string","default":"superagent",title:"下载策略"},initDomain:{type:"string",title:"初始化域名"},proxySettings:{type:"object",title:"基础设置",properties:{useProxy:{type:"boolean",title:"是否启用代理"},timeout:{type:"number",title:"超时时间"},charset:{type:"string",title:"字符编码"},ua:{type:"string",title:"USERAGENT"},ipInfo:{type:"object",title:"代理ip设置",properties:{host:{type:"string",format:"url-ip",title:"代理ip或域名"},port:{type:"number",title:"代理端口"}}}}},pages:{type:"array",title:"分析页面配置",items:{type:"object",required:["key","fieldKey"],title:"分析页面配置",properties:{key:{type:"string",title:"页面的KEY"},areas:{type:"array",title:"页面区域",items:{type:"object",required:["selector","dealStrategy","key"],properties:{key:{type:"string",title:"区域KEY"},selector:{type:"string",title:"选择器"},dealStrategy:{type:"string","default":"jsdom",title:"分析策略"}}}},rule:{type:"array",title:"匹配规则","default":[],items:{type:"object",title:"路径配置",required:["regexp","scope"],properties:{regexp:{type:"string",title:"正则规则"},scope:{type:"string",title:"修饰符"}}}},fieldKey:{type:"string",title:"主键字段"},strict:{type:"boolean",title:"是否启用严格模式"},strictFields:{type:"array",title:"严格模式下，验证字段","default":[],items:{type:"string",title:"验证字段"}},fields:{type:"object",title:"分析字段配置"}}}},description:{type:"string",title:"描述",maxLength:500}}},l=function(){function e(t,r){var o={key:e.key,type:i.ActionType.list,title:"爬虫配置文件管理",icon:"content-save-settings",list:{columns:[r.columnBuilder("<span>{{::item.key}}</span>","KEY").toValue(),r.columnBuilder("<span>{{ ::item.host }}</span>","域名").toValue(),r.columnBuilder("<span>{{ ::item.interval }}</span>","间隔时间").toValue(),r.columnBuilder("<span>{{ ::item.downloader }}</span>","下载策略").toValue(),r.columnBuilder("<span>{{ ::item.description }}</span>","详情").toValue()],searchActionKey:f.key,showRefreshBtn:!0,showSearchBtn:!0,showSearchPanel:!1,toolbars:[],itemToolbars:[]},itemActions:[{key:u.key},{key:k.key},{key:m.key}],actions:[d.key],interfaces:[{key:"crawlerSettingList",method:a.MethodType.GET,address:"",port:null,path:"crawler_settings",jpp:{set:{"/total":"/count","/rows":"/rows"},copy:{},move:{},del:{}},isRestful:!0}]};return o}return e.$inject=["toolbarUtils","actionUtils"],e.key="crawlerSettingListAction",e}(),s=function(){function e(t,r){var a={key:e.key,type:i.ActionType.form,title:"基础设置",icon:"add",form:{formSchema:[{key:"key",type:"text",htmlClass:"md-block"},{key:"host",type:"text",htmlClass:"md-block"},{key:"initDomain",type:"text",htmlClass:"md-block"},{key:"interval",type:"number",htmlClass:"md-block"},{key:"downloader",type:"select",titleMap:[{name:"SUPERAGENT",value:"superagent"},{name:"PHANTOM",value:"phantom"}],htmlClass:"md-block"},{key:"description",type:"textarea",htmlClass:"md-block"}]}};return a}return e.$inject=["toolbarUtils","actionUtils"],e.key="crawlerSettingAddFirstAction",e}(),n=function(){function e(t,r){var a={key:e.key,type:i.ActionType.form,title:"白名单设置",icon:"add",form:{formSchema:[{key:"domainWhiteList",type:"chips",startEmpty:!0,description:"域名白名单，配置可以爬取的域名列表",showHints:!0,htmlClass:"md-block"},{key:"whitePathList",type:"array",fieldHtmlClass:"layout-row flex",startEmpty:!0,description:"路径白名单，配置可以爬取的路径列表",showHints:!0,items:[{type:"section",htmlClass:"layout-row flex",items:[{key:"whitePathList[].enable",type:"select",titleMap:[{name:"启用",value:!0},{name:"不启用",value:!1}]},{key:"whitePathList[].regexp",htmlClass:"md-block flex",type:"text"},{key:"whitePathList[].scope",type:"text"},{key:"whitePathList[].description",type:"text"}]}]}]}};return a}return e.$inject=["toolbarUtils","actionUtils"],e.key="crawlerSettingAddSecondAction",e}(),c=function(){function e(t,r){var a={key:e.key,type:i.ActionType.form,title:"其他设置",icon:"add",form:{formSchema:[{key:"proxySettings",type:"card",items:[{key:"proxySettings.useProxy",type:"checkbox"},{key:"proxySettings.timeout",type:"number",htmlClass:"md-block"},{key:"proxySettings.charset",type:"text",htmlClass:"md-block"},{key:"proxySettings.ua",type:"textarea",maxLength:300,htmlClass:"md-block"},{key:"proxySettings.ipInfo",type:"card",items:[{key:"proxySettings.ipInfo.host",type:"text",htmlClass:"md-block"},{key:"proxySettings.ipInfo.port",type:"number",htmlClass:"md-block"}]}],htmlClass:"md-block"}]}};return a}return e.$inject=["toolbarUtils","actionUtils"],e.key="crawlerSettingAddThirdAction",e}(),y=function(){function e(e,t){var r={key:p.key,type:i.ActionType.form,title:"页面配置",icon:"add",form:{formSchema:[{key:"pages",type:"tabarray",startEmpty:!0,fieldHtmlClass:"layout-column flex",items:[{type:"section",grid:{flex:""},items:[{key:"pages[].key",type:"text",htmlClass:"md-block"},{key:"pages[].fieldKey",type:"text",htmlClass:"md-block"},{key:"pages[].strict",type:"switch",htmlClass:"md-block"},{key:"pages[].strictFields",startEmpty:!0,type:"chips",htmlClass:"md-block"},{key:"pages[].rule",type:"array",startEmpty:!0,items:[{type:"section",htmlClass:"layout-row flex",items:[{key:"pages[].rule[].regexp",htmlClass:"md-block flex",type:"text"},{key:"pages[].rule[].scope",type:"text"}]}]}]}]}]}};return r}return e.$inject=["toolbarUtils","actionUtils"],e.key="crawlerSettingAddForthAction",e}(),p=function(){function e(t,r){var a={key:e.key,type:i.ActionType.form,title:"页面配置",icon:"add",form:{formSchema:[{key:"pages",type:"tabarray",items:[{type:"section",htmlClass:"column-row flex",items:[{key:"pages[].key",type:"text",htmlClass:"md-block"},{key:"pages[].areas",type:"array",startEmpty:!0,description:"区域配置，用户优化分析性能，减少dom的查询。",showHints:!0,items:[{type:"section",grid:{flex:"",layout:"row"},items:[{key:"pages[].areas[].key",type:"text"},{key:"pages[].areas[].selector",htmlClass:"md-block flex",type:"text"},{key:"pages[].areas[].dealStrategy",type:"text"}]}]},{key:"pages[].fields",type:"jeditor",htmlClass:"md-block"}]}]}]}};return a}return e.$inject=["toolbarUtils","actionUtils"],e.key="crawlerSettingAddFifthAction",e}(),d=function(){function e(){var t={key:e.key,type:i.ActionType.wizard,title:"新建爬虫配置文件",icon:"add",refreshList:!0,wizard:{defaultSchema:{dataSchema:o},actions:[s.key,n.key,c.key,y.key,p.key]},closeDialog:!0,interfaces:[{key:"crawlerSettingAdd",method:a.MethodType.POST,address:"",port:null,path:"crawler_settings",isRestful:!0}]};return t}return e.key="crawlerSettingAddAction",e}(),m=function(){function e(){var t={key:e.key,type:i.ActionType.wizard,title:"复制爬虫配置文件",icon:"content_copy",refreshList:!0,wizard:{defaultSchema:{dataSchema:o},actions:[s.key,n.key,c.key,y.key,p.key]},closeDialog:!0,interfaces:[{key:"crawlerSettingAdd",method:a.MethodType.POST,address:"",port:null,path:"crawler_settings",isRestful:!0}]};return t}return e.key="crawlerSettingCopyAction",e}(),u=function(){function e(t,r){var l={key:e.key,type:i.ActionType.wizard,title:"修改爬虫配置文件",icon:"edit",refreshList:!0,wizard:{defaultSchema:{dataSchema:o},actions:[s.key,n.key,c.key,y.key,p.key]},closeDialog:!0,interfaces:[{key:"crawlerSettingEdit",method:a.MethodType.PUT,idFieldPath:"/key",address:"",port:null,path:"crawler_settings",isRestful:!0}]};return l}return e.$inject=["toolbarUtils","actionUtils"],e.key="crawlerSettingEditAction",e}(),k=function(){function e(){var t={key:e.key,type:i.ActionType.confirm,title:"删除爬虫配置文件",icon:"delete",refreshList:!0,confirm:{confirmTitle:"",confirmContent:"确定要删除爬虫配置文件吗!"},interfaces:[{key:"crawlerSettingDelete",method:a.MethodType.DELETE,idFieldPath:"/key",address:"",port:null,path:"crawler_settings",isRestful:!0}]};return t}return e.key="crawlerSettingDeleteAction",e}(),f=function(){function e(){var t={key:e.key,type:i.ActionType.form,title:"搜索爬虫配置文件",icon:"search",form:{dataSchema:o,formSchema:[{key:"key",type:"text",required:!1,copyValueTo:["/key/$eq"],htmlClass:"md-block"}]}};return t}return e.key="crawlerSettingSearchAction",e}(),h=function(){function e(){var t={key:e.key,type:i.ActionType.form,title:"爬虫命令",icon:"apple-keyboard-command",form:{dataSchema:{type:"object",required:["key","action"],properties:{key:{type:"string",title:"配置文件KEY"},action:{type:"string",title:"执行的命令"},options:{type:"object",title:"可选项",properties:{url:{type:"string",title:"测试的地址"},type:{type:"string","default":"forever",title:"爬虫启动模式"},startCrawler:{type:"boolean","default":!0,title:"开启爬取链接模块"},startDeal:{type:"boolean","default":!0,title:"开启html处理模块"},startDownload:{type:"boolean","default":!1,title:"开启图片下载模块"},startChip:{type:"boolean","default":!1,title:"开启更换ip模块"}}}}},formSchema:[{key:"action",type:"select",titleMap:[{value:"crawler:start",name:"开始爬虫",group:""},{value:"crawler:stop",name:"停止爬虫",group:""},{value:"crawler:create",name:"开启一个新爬虫",group:""},{value:"crawler:reset",name:"重置一个数据库",group:""},{value:"crawler:test",name:"测试地址",group:""}],htmlClass:"md-block"},{key:"key",type:"autocomplete-1",condition:"model.action==='crawler:start' || model.action==='crawler:reset'  || model.action==='crawler:test'",acOptions:{textField:"key",dataField:"rows",noCache:!1,search:"/where/key/$like",actionKey:l.key},htmlClass:"md-block"},{key:"options",type:"card",grid:{flex:""},condition:"!!model.action",items:[{key:"options.type",type:"select",htmlClass:"md-block",titleMap:[{value:"forever",name:"FOREVER启动"},{value:"",name:"NODE启动"}]},{key:"options.url",htmlClass:"md-block",type:"text"},{key:"options.startCrawler",condition:"model.action==='crawler:start'",htmlClass:"md-block",type:"checkbox"},{key:"options.startDeal",condition:"model.action==='crawler:start'",htmlClass:"md-block",type:"checkbox"},{key:"options.startDownload",condition:"model.action==='crawler:start'",htmlClass:"md-block",type:"checkbox"},{key:"options.startChip",condition:"model.action==='crawler:start'",htmlClass:"md-block",type:"checkbox"}]}]}};return t}return e.key="crawlerSettingAckAction",e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t=[l,f,d,u,k,m,h,s,n,c,y,p];_.each(t,function(t){e.service(t.key,t)})}}});
//# sourceMappingURL=0.e91d552c044351456356.hot-update.js.map