{"version":3,"sources":["webpack:///./src/pages/page/router.ts?0e30","webpack:///./src/pages/page/ctls/page.execute.cmd.ts?d6bb","webpack:///./src/directives/execute/index.ts?5816","webpack:///./src/directives/execute/execute.cmd.directive.ts?8d80"],"names":[],"mappings":";;;;;;AAIA,6CAA+B,EAAwB,CAAC;AACxD,gDAA6B,EAA2B,CAAC;AACzD,mDAAgC,EAA8B,CAAC;AAC/D,8CAAyC,EAAyB,CAAC;AAEtD,mBAAU,GAAG,UAAC,kBAAkB,EAAE,cAAc;KAEzD,cAAc,CAAC,KAAK,CAAC,WAAW,EAAE;SAC9B,GAAG,EAAE,WAAW;SAChB,IAAI,EAAE;aACF,WAAW,EAAE;iBACT,MAAM,EAAE,CAAC,WAAW,CAAC;iBACrB,IAAI,EAAE,CAAC,MAAM,CAAC;cACjB;UACJ;SACD,KAAK,EAAE;aACH,SAAS,EAAE;iBACP,UAAU,EAAE,gCAAc;iBAC1B,YAAY,EAAE,SAAS;iBACvB,QAAQ,EAAE,mBAAO,CAAC,EAA2B,CAAC,EAAE;cACnD;UACJ;MACJ,CAAC,CAAC,KAAK,CAAC,SAAS,EAAE;SAChB,GAAG,EAAE,SAAS;SACd,KAAK,EAAE;aACH,SAAS,EAAE;iBACP,UAAU,EAAE,iCAAY;iBACxB,YAAY,EAAE,SAAS;iBACvB,QAAQ,EAAE,mBAAO,CAAC,EAA8B,CAAC,EAAE;cACtD;UACJ;MACJ,CAAC,CAAC,KAAK,CAAC,YAAY,EAAE;SACnB,GAAG,EAAE,YAAY;SACjB,KAAK,EAAE;aACH,SAAS,EAAE;iBACP,UAAU,EAAE,uCAAe;iBAC3B,YAAY,EAAE,SAAS;iBACvB,QAAQ,EAAE,mBAAO,CAAC,EAAiC,CAAC,EAAE;cACzD;UACJ;MACJ,CAAC,CAAC,KAAK,CAAC,iBAAiB,EAAE;SACxB,GAAG,EAAE,iBAAiB;SACtB,KAAK,EAAE;aACH,SAAS,EAAE;iBACP,UAAU,EAAE,2CAAwB;iBACpC,YAAY,EAAE,SAAS;iBACvB,QAAQ,EAAE,mBAAO,CAAC,EAA8B,CAAC,EAAE;cACtD;UACJ;MACJ,CAAC,CAAC;AACP,EAAC,CAAC;;;;;;;;;ACpDF,yCAA+B,EAAyB,CAAC;AAGzD;KAUI,kCAAoB,UAAqC,EAAU,YAAuC,EAAU,QAAQ,EAAU,YAAqC,EAAU,QAAQ,EAAU,YAAY;SAA/L,eAAU,GAAV,UAAU,CAA2B;SAAU,iBAAY,GAAZ,YAAY,CAA2B;SAAU,aAAQ,GAAR,QAAQ;SAAU,iBAAY,GAAZ,YAAY,CAAyB;SAAU,aAAQ,GAAR,QAAQ;SAAU,iBAAY,GAAZ,YAAY;SAFnN,kBAAa,GAAQ,EAAE,CAAC;SAGpB,IAAI,CAAC,GAAG,GAAG,4BAAc,CAAC,GAAG,CAAC;SAC9B,IAAI,CAAC,aAAa,EAAE,CAAC;SACrB,IAAI,CAAC,QAAQ,GAAG;aACZ,OAAO,EAAE,EAAE;UACd,CAAC;KACN,CAAC;KAED,gDAAa,GAAb;SACI,IAAI,CAAC,QAAQ,GAAG;aACZ,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,wBAAwB,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE;aACzF,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE;UAC7E,CAAC;KACN,CAAC;KAED,2CAAQ,GAAR,UAAS,MAAM,EAAE,IAAI;SAArB,iBAqBC;SApBG,IAAI,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;SACpE,IAAI,OAAO,CAAC;SAEZ,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;aACV,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aACnB,OAAO,CAAC,IAAI,CAAC,UAAC,GAAG;iBACb,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;iBACrC,OAAO,GAAG,GAAG,CAAC;iBAEd,MAAM,CAAC,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAI,CAAC,GAAG,CAAC,CAAC;aAC5C,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,WAAW;iBAChB,KAAI,CAAC,WAAW,GAAG,WAAW,CAAC;iBAE/B,MAAM,CAAC,KAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,WAAW,EAAE,OAAO,EAAE,KAAI,CAAC,aAAa,CAAC,CAAC;aAChF,CAAC,CAAC,CAAC,IAAI,CAAC,UAAC,GAAG;iBACR,KAAI,CAAC,UAAU,CAAC,UAAU,CAAC,sBAAsB,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACvE,CAAC,CAAC,CAAC,OAAO,CAAC;iBACP,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;aACxB,CAAC,CAAC,CAAC;SACP,CAAC;KACL,CAAC;KA7CM,gCAAO,GAAG,CAAC,YAAY,EAAE,cAAc,EAAE,UAAU,EAAE,eAAe,EAAE,UAAU,EAAE,cAAc,CAAC,CAAC;KA8C7G,+BAAC;AAAD,EAAC;AA/CY,iCAAwB,2BA+CpC;;;;;;;;;ACpDD,oCAAgB,GAAU,CAAC;AAE3B,qBAAO,GAAyB,CAAC;AACjC,qBAAO,GAAkB,CAAC;AAC1B,qBAAO,GAAc,CAAC;AAEtB;mBAAe,gBAAG,CAAC;;;;;;;;;ACLnB,KAAY,CAAC,uBAAM,EAAQ,CAAC;AAC5B,oCAAuB,GAAU,CAAC;AAYlC;KAiBI,wCAAoB,MAAM,EAAU,QAAQ,EAAU,OAAO,EAAU,EAAqB,EAAU,QAAQ,EAAU,YAAY,EAAU,aAAsC;SAjBxL,iBAgGC;SA/EuB,WAAM,GAAN,MAAM;SAAU,aAAQ,GAAR,QAAQ;SAAU,YAAO,GAAP,OAAO;SAAU,OAAE,GAAF,EAAE,CAAmB;SAAU,aAAQ,GAAR,QAAQ;SAAU,iBAAY,GAAZ,YAAY;SAAU,kBAAa,GAAb,aAAa,CAAyB;SAZpL,kBAAa,GAAgB,EAAE,CAAC;SAChC,qBAAgB,GAAmB,EAAE,CAAC;SACtC,mBAAc,GAAe,EAAE,CAAC;SAEhC,cAAS,GAAQ,EAAE,CAAC;SAKpB,YAAO,GAAW,mBAAmB,CAAC;SAIlC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;aAChB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,gBAAgB,EAAE,cAAQ,CAAC,CAAC,CAAC;aAC7C,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,eAAe,EAAE,UAAC,KAAK,EAAE,GAAG;iBAExC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,KAAI,CAAC,GAAG,CAAC,CAAC;iBAEjD,EAAE,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,KAAK,KAAI,CAAC,GAAG,CAAC,CAAC,CAAC;qBAC/B,MAAM,CAAC;iBACX,CAAC;iBACD,KAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;iBAC9B,EAAE,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;qBACxC,IAAI,SAAO,GAAG,CAAC,CAAC,MAAM,CAAC,KAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,UAAC,IAAS;yBACzD,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC;qBAC/B,CAAC,CAAC,CAAC;qBACH,EAAE,CAAC,CAAC,SAAO,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;yBACtB,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;qBACzC,CAAC;qBAAC,IAAI,CAAC,CAAC;yBACJ,CAAC,CAAC,IAAI,CAAC,SAAO,EAAE,UAAC,GAAG,EAAE,GAAG;6BACrB,CAAC,CAAC,MAAM,CAAC,SAAO,CAAC,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC;yBAChC,CAAC,CAAC,CAAC;qBACP,CAAC;iBACL,CAAC;aACL,CAAC,CAAC,CAAC;SACP,CAAC;SACD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,sBAAsB,EAAE,UAAC,KAAK,EAAE,KAAa;aACzD,KAAI,CAAC,aAAa,GAAG,EAAE,CAAC;aACxB,KAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;aAC3B,KAAI,CAAC,cAAc,GAAG,EAAE,CAAC;aACzB,KAAI,CAAC,SAAS,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;aAC5B,KAAI,CAAC,GAAG,GAAG,EAAE,CAAC;aACd,KAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;SACjC,CAAC,CAAC,CAAC;SAEH,IAAI,CAAC,MAAM,CAAC,GAAG,CAAI,IAAI,CAAC,OAAO,oBAAiB,EAAE,UAAC,KAAK,EAAE,IAAI;aAC1D,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAC,IAAI,EAAE,GAAG;iBACxB,EAAE,CAAC,CAAC,KAAI,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;qBAC1C,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;iBACvD,CAAC;aACL,CAAC,CAAC,CAAC;aACH,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;SAE7C,CAAC,CAAC,CAAC;SAEH,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;SAC3B,IAAI,CAAC,QAAQ,GAAG;aACZ,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,wBAAwB,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE;aACzF,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,OAAO,EAAE;UAC7E,CAAC;KACN,CAAC;KAED,yDAAgB,GAAhB,UAAiB,KAAa;SAA9B,iBA2BC;SA1BG,IAAI,CAAC,SAAS,GAAG,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;SACzE,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;SACpB,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;SAEjB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SAErB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACnB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;SACnB,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC;aACR,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,gBAAgB,EAAE,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;UAE/G,CAAC,CAAC,IAAI,CAAC,UAAC,OAAY;aACjB,KAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC,CAAC,EAAE,KAAI,CAAC,aAAa,CAAC,CAAC;SAEvF,CAAC,CAAC,CAAC,IAAI,CAAC;aACJ,EAAE,CAAC,CAAC,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;iBACjC,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC;aAG9D,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,MAAM,CAAC,KAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;aACxC,CAAC;SACL,CAAC,CAAC,CAAC,OAAO,CAAC;aACP,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;SACxB,CAAC,CAAC,CAAC;KAEP,CAAC;KA9FM,sCAAO,GAAG,CAAC,QAAQ,EAAE,UAAU,EAAE,SAAS,EAAE,IAAI,EAAE,UAAU,EAAE,cAAc,EAAE,eAAe,CAAC,CAAC;KA+F1G,qCAAC;AAAD,EAAC;AAhGY,uCAA8B,iCAgG1C;AAED;KACI,MAAM,CAAC;SACH,QAAQ,EAAE,IAAI;SACd,KAAK,EAAE,EAAE;SACT,gBAAgB,EAAE;aACd,UAAU,EAAE,IAAI;UACnB;SAED,QAAQ,EAAE,mBAAO,CAAC,GAA6B,CAAC;SAChD,UAAU,EAAE,8BAA8B;SAC1C,YAAY,EAAE,eAAe;MAChC;AACL,EAAC;AAED,gBAAM,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;AAE5C,gBAAM,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,MAAM,EAAE,UAAU,IAAI;SAC/C,MAAM,CAAC,UAAU,IAAI;aACjB,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;SAClC,CAAC;KACL,CAAC,CAAC,CAAC,CAAC;AAEJ,gBAAM,CAAC,SAAS,CAAC,iBAAiB,EAAE,CAAC,YAAY,EAAE,UAAU,UAAU;SACnE,MAAM,CAAC;aACH,QAAQ,EAAE,GAAG;aACb,IAAI,EAAE,UAAU,KAAK,EAAE,OAAO,EAAE,KAAU;iBACtC,IAAI,SAAS,GAAG,WAAW,GAAG,CAAC,KAAK,CAAC,eAAe,IAAI,SAAS,CAAC,EAC9D,CAAC,CAAC;iBAEN,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,UAAC,KAAK,EAAE,QAAQ;qBACjC,UAAU,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;iBACjD,CAAC,EAAE;qBACK,SAAS,EAAE,KAAK,CAAC,SAAS,IAAI,EAAE;qBAChC,OAAO,EAAE,KAAK;kBACjB,CAAC,CAAC;iBAEP,UAAU,CAAC,GAAG,CAAC,SAAS,GAAG,OAAO,EAAE,UAAU,CAAC,EAAE,GAAG;qBAChD,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBAChB,CAAC,CAAC,CAAC;aACP,CAAC;UACJ,CAAC;KACN,CAAC,CAAC,CAAC,CAAC","file":"0.8ba2f95153bbd1bec02b.hot-update.js","sourcesContent":["/**\n * Created by NICK on 16/8/9.\n */\n\nimport { PageController } from './ctls/page.controller';\nimport { D3Controller } from './ctls/page.d3.controller';\nimport { AllInController } from './ctls/page.allin.controller';\nimport { PageExecuteCmdController } from './ctls/page.execute.cmd';\n\nexport const initRouter = ($urlRouterProvider, $stateProvider) => {\n    // 路由规则\n    $stateProvider.state(\"home.page\", {\n        url: \"page/:key\",\n        data: {\n            permissions: {\n                except: [\"anonymous\"],\n                only: [\"user\"]\n            }\n        },\n        views: {\n            \"content\": {\n                controller: PageController,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.template.jade\")()\n            }\n        }\n    }).state('home.d3', {\n        url: \"d3/:key\",\n        views: {\n            \"content\": {\n                controller: D3Controller,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.d3.template.jade\")()\n            }\n        }\n    }).state('home.allin', {\n        url: \"allin/:key\",\n        views: {\n            \"content\": {\n                controller: AllInController,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.allin.template.jade\")()\n            }\n        }\n    }).state('home.executeCmd', {\n        url: \"executeCmd/:key\",\n        views: {\n            \"content\": {\n                controller: PageExecuteCmdController,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.execute.cmd.jade\")()\n            }\n        }\n    });\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/router.ts\n **/","\nimport { IActionModel, ActionType, IClientData } from '../../../directives/action/models/action.model';\nimport { ExecuteCmdForm } from '../services/execute.cmd';\nimport * as _ from 'lodash';\n\nexport class PageExecuteCmdController {\n    static $inject = [\"$rootScope\", \"$stateParams\", \"$timeout\", \"materialUtils\", \"fxAction\", \"toolbarUtils\"];\n\n    key: string;\n    toolbars: Array<any>;\n    actionModel: IActionModel;\n    formData: any;\n    isBusy: boolean;\n    executeResult: any = {};\n\n    constructor(private $rootScope: angular.IRootScopeService, private $stateParams: ng.ui.IStateParamsService, private $timeout, private materilUtils: fx.utils.materialStatic, private fxAction, private toolbarUtils) {\n        this.key = ExecuteCmdForm.key;\n        this.doInitToolbar();\n        this.formData = {\n            listIps: []\n        };\n    }\n\n    doInitToolbar() {\n        this.toolbars = [\n            this.toolbarUtils.noneBuilder(\"icon\").iconBuilder('apple-keyboard-command', {}).toValue(),\n            this.toolbarUtils.labelBuilder('执行命令').attrBuilder({ flex: \"\" }).toValue()\n        ];\n    }\n\n    doSubmit($event, form) {\n        let promise = this.fxAction.doAction(this.key, this.formData, form);\n        let results;\n\n        if (promise) {\n            this.isBusy = true;\n            promise.then((res) => {\n                this.materilUtils.showMsg(\"执行命令成功！\");\n                results = res;\n\n                return this.fxAction.getModel(this.key);\n            }).then((actionModel) => {\n                this.actionModel = actionModel;\n\n                return this.fxAction.doDealResult(actionModel, results, this.executeResult);\n            }).then((res) => {\n                this.$rootScope.$broadcast(\"showExecuteCmdResult\", res.data.cmdid);\n            }).finally(() => {\n                this.isBusy = false;\n            });\n        }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/ctls/page.execute.cmd.ts\n **/","import mdl from './module';\n\nimport './execute.cmd.directive';\nimport './socket.factory';\nimport './index.scss';\n\nexport default mdl;\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/execute/index.ts\n **/","import { IActionModel, ActionType, IClientData } from '../../directives/action/models/action.model';\nimport * as _ from 'lodash';\nimport { module } from './module';\n\ninterface ICmdClientData extends IClientData {\n    cmdResMap?: any;\n}\n\ninterface IExecuteProcess {\n    total: number;\n    success: number;\n    fail: number;\n}\n\nexport class PageExecuteCmdResultController {\n    static $inject = [\"$scope\", \"fxAction\", \"sockets\", \"$q\", \"$timeout\", \"toolbarUtils\", \"materialUtils\"];\n\n    jid: string;\n    toolbars: Array<any>;\n    cmdClientData: IClientData = {};\n    cmdResClientData: ICmdClientData = {};\n    deviceSelected: Array<any> = [];\n    command: any;\n    cmdResMap: any = {};\n    isBusy: boolean;\n    isOpen: boolean;\n    realTime: boolean;\n    resFilter: any;\n    listKey: string = 'executeCmdResList';\n    process: number;\n\n    constructor(private $scope, private fxAction, private sockets, private $q: angular.IQService, private $timeout, private toolbarUtils, private materialUtils: fx.utils.materialStatic) {\n        if (this.realTime) {\n            this.$scope.$on(\"socket:connect\", () => { });\n            this.$scope.$on(\"socket:events\", (event, msg) => {\n\n                console.log(\"socket\", msg._source.jid, this.jid);\n\n                if (msg._source.jid !== this.jid) {\n                    return;\n                }\n                this.cmdResMap[msg._id] = msg;\n                if (_.isArray(this.cmdResClientData.rows)) {\n                    let devices = _.filter(this.cmdResClientData.rows, (item: any) => {\n                        return item._id == msg._id;\n                    });\n                    if (devices.length == 0) {\n                        this.cmdResClientData.rows.push(msg);\n                    } else {\n                        _.each(devices, (dev, key) => {\n                            _.extend(devices[key], msg);\n                        });\n                    }\n                }\n            });\n        }\n        this.$scope.$on(\"showExecuteCmdResult\", (event, cmdId: string) => {\n            this.cmdClientData = {};\n            this.cmdResClientData = {};\n            this.deviceSelected = [];\n            this.cmdResMap = { len: 0 };\n            this.jid = \"\";\n            this.getCommandResult(cmdId);\n        });\n\n        this.$scope.$on(`${this.listKey}:searchComplete`, (event, data) => {\n            _.each(data.rows, (item, key) => {\n                if (this.cmdResMap.hasOwnProperty(item._id)) {\n                    _.extend(data.rows[key], this.cmdResMap[item._id]);\n                }\n            });\n            console.log(\"searchComplete\", data.rows);\n            // data.rows.length && (this.deviceSelected = [].concat(data.rows));\n        });\n\n        this.cmdResClientData = {};\n        this.toolbars = [\n            this.toolbarUtils.noneBuilder(\"icon\").iconBuilder('apple-keyboard-command', {}).toValue(),\n            this.toolbarUtils.labelBuilder('执行命令').attrBuilder({ flex: \"\" }).toValue()\n        ];\n    }\n\n    getCommandResult(cmdId: string) {\n        this.resFilter = { \"query\": { \"and\": [{ \"match\": { \"jid\": cmdId } }] } };\n        this.cmdResMap = {};\n        this.jid = cmdId;\n        // this.cmdResClientData.rows = _.map(this.cmdResMap);\n        this.realTime = true;\n        // this.$timeout(() => {\n        this.isBusy = true;\n        this.isOpen = true;\n        this.$q.all([\n            this.fxAction.doAction(\"executeCmdList\", { where: { \"query\": { \"and\": [{ \"match\": { \"_id\": cmdId } }] } } })\n            // this.fxAction.doAction(\"executeCmdResList\", { where: { \"query\": { \"and\": [{ \"match\": { \"jid\": cmdId } }] } } })\n        ]).then((results: any) => {\n            this.fxAction.doDealResult(results[0].actionModel, results[0], this.cmdClientData);\n            // this.fxAction.doDealResult(results[1].actionModel, results[1], this.cmdResClientData);\n        }).then(() => {\n            if (this.cmdClientData.rows.length) {\n                this.command = this.cmdClientData.rows[0]._source.command;\n                // this.deviceClientData.rows = this.cmdClientData.rows[0]._source.listip;\n                // this.deviceClientData.rows.length && (this.deviceSelected = [].concat(this.deviceClientData.rows));\n            } else {\n                return this.getCommandResult(cmdId);\n            }\n        }).finally(() => {\n            this.isBusy = false;\n        });\n        // }, 200);\n    }\n}\n\nfunction Directive(): ng.IDirective {\n    return {\n        restrict: 'EA',\n        scope: {},\n        bindToController: {\n            \"realTime\": '@?'\n        },\n        // replace: true,\n        template: require('./tpls/execute.cmd.tmp.jade'),\n        controller: PageExecuteCmdResultController,\n        controllerAs: \"executeCmdCtl\"\n    }\n}\n\nmodule.directive(\"executeCmd\", [Directive]);\n\nmodule.filter('to_trusted', ['$sce', function ($sce) {\n    return function (text) {\n        return $sce.trustAsHtml(text);\n    }\n}]);\n\nmodule.directive('angularTerminal', ['$rootScope', function ($rootScope) {\n    return {\n        restrict: 'A',\n        link: function (scope, element, attrs: any) {\n            var namespace = 'terminal.' + (attrs.angularTerminal || 'default'),\n                t;\n\n            t = element.terminal((input, terminal) => {\n                $rootScope.$emit(namespace, input, terminal);\n            }, {\n                    greetings: attrs.greetings || '',\n                    enabled: false\n                });\n\n            $rootScope.$on(namespace + '.echo', function (e, msg) {\n                t.echo(msg);\n            });\n        }\n    };\n}]);\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/execute/execute.cmd.directive.ts\n **/"],"sourceRoot":""}