{"version":3,"sources":["webpack:///./src/pages/page/router.ts?0e30","webpack:///./src/pages/page/ctls/page.execute.cmd.ts?d6bb"],"names":[],"mappings":"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","file":"0.6900d8ad52e029f2b3b5.hot-update.js","sourcesContent":["/**\n * Created by NICK on 16/8/9.\n */\n\nimport { PageController } from './ctls/page.controller';\nimport { D3Controller } from './ctls/page.d3.controller';\nimport { AllInController } from './ctls/page.allin.controller';\nimport { PageExecuteCmdController, PageExecuteCmdResultController } from './ctls/page.execute.cmd';\n\nexport const initRouter = ($urlRouterProvider, $stateProvider) => {\n    // 路由规则\n    $stateProvider.state(\"home.page\", {\n        url: \"page/:key\",\n        data: {\n            permissions: {\n                except: [\"anonymous\"],\n                only: [\"user\"]\n            }\n        },\n        views: {\n            \"content\": {\n                controller: PageController,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.template.jade\")()\n            }\n        }\n    }).state('home.d3', {\n        url: \"d3/:key\",\n        views: {\n            \"content\": {\n                controller: D3Controller,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.d3.template.jade\")()\n            }\n        }\n    }).state('home.allin', {\n        url: \"allin/:key\",\n        views: {\n            \"content\": {\n                controller: AllInController,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.allin.template.jade\")()\n            }\n        }\n    }).state('home.executeCmd', {\n        url: \"executeCmd/:key\",\n        views: {\n            \"content\": {\n                controller: PageExecuteCmdController,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.execute.cmd.jade\")()\n            },\n            \"result@home.executeCmd\": {\n                controller: PageExecuteCmdResultController,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.execute.cmd.result.jade\")()\n            }\n        }\n    });\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/router.ts\n **/","/**\n * Created by NICK on 16/8/10.\n */\nimport { IActionModel, ActionType, IClientData } from '../../../directives/action/models/action.model';\nimport { ExecuteCmdForm } from '../services/execute.cmd';\n\n\nexport class PageExecuteCmdResultController {\n    static $inject = [\"$scope\", \"fxAction\", \"sockets\"];\n\n    private\n\n    constructor(private $scope, private fxAction, private sockets) {\n        this.$scope.$on(\"socket:connect\", () => {\n            // console.log(\"dfidjifjaijd\");\n        });\n        this.$scope.$on(\"socket:events\", (msg) => {\n            // console.log(msg);\n        });\n        this.$scope.$on(\"showExecuteCmdResult\", (event, cmdId: string) => {\n            this.getCommandResult(cmdId);\n        });\n    }\n\n    getCommandResult(cmdId: string) {\n        console.log(cmdId);\n    }\n}\n\nexport class PageExecuteCmdController {\n    static $inject = [\"$rootScope\", \"$stateParams\", \"materialUtils\", \"fxAction\", \"toolbarUtils\"];\n\n    key: string;\n    isOpen: boolean;\n    toolbars: Array<any>;\n    actionModel: IActionModel;\n    formData: any;\n    isBusy: boolean;\n    executeResult: any = {};\n\n    constructor(private $rootScope: angular.IRootScopeService, private $stateParams: ng.ui.IStateParamsService, private materilUtils: fx.utils.materialStatic, private fxAction, private toolbarUtils) {\n        this.key = ExecuteCmdForm.key;\n        this.doInitToolbar();\n        this.formData = {\n            listIps: []\n        };\n\n        this.$rootScope.$broadcast(\"showExecuteCmdResult\", \"4d1b57ea-68cc-40c3-b053-808c44dc1d3a\");\n    }\n\n    doInitToolbar() {\n        this.toolbars = [\n            this.toolbarUtils.noneBuilder(\"icon\").iconBuilder('apple-keyboard-command', {}).toValue(),\n            this.toolbarUtils.labelBuilder('执行命令').attrBuilder({ flex: \"\" }).toValue()\n        ];\n    }\n\n    showSivenav() {\n        this.isOpen = !this.isOpen;\n    }\n\n    doSubmit($event, form) {\n        let promise = this.fxAction.doAction(this.key, this.formData, form);\n        let results;\n\n        if (promise) {\n            this.isBusy = true;\n            promise.then((res) => {\n                this.materilUtils.showMsg(\"执行命令成功！\");\n                results = res;\n\n                return this.fxAction.getModel(this.key);\n            }).then((actionModel) => {\n                this.actionModel = actionModel;\n\n                return this.fxAction.doDealResult(actionModel, results, this.executeResult);\n            }).then((res) => {\n                this.isOpen = true;\n                this.$rootScope.$broadcast(\"showExecuteCmdResult\", res.data.cmdid);\n            }).finally(() => {\n                this.isBusy = false;\n            });\n        }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/ctls/page.execute.cmd.ts\n **/"],"sourceRoot":""}