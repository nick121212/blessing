{"version":3,"sources":["webpack:///./src/pages/home/router.ts?19b6","webpack:///./src/pages/home/ctls/sidenavl.controller.ts?62b4"],"names":[],"mappings":"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","file":"0.3921f3b91601911f74b5.hot-update.js","sourcesContent":["/**\n * Created by NICK on 16/8/9.\n */\n\nimport {HomeController} from './ctls/home.controller';\nimport {SidenavLeftController} from './ctls/sidenavl.controller';\nimport {SidenavRightController} from './ctls/sidenavr.controller';\nimport {ContentController} from './ctls/content.controller';\n\nexport const initRouter = ($urlRouterProvider, $stateProvider) => {\n    // 设置默认路由\n    $urlRouterProvider.otherwise(($injector) => {\n        let $state = $injector.get(\"$state\");\n        $state.go(\"home\");\n    });\n    // 路由规则\n    $stateProvider.state(\"home\", {\n        url: \"/\",\n        data: {\n            permissions: {\n                except: [\"anonymous\"],\n                only: [\"user\"]\n            }\n        },\n        views: {\n            \"\": {\n                controller: HomeController,\n                controllerAs: \"homeCtl\",\n                template: require(\"./tpls/home.template.jade\")(),\n            },\n            \"sidenavLeft@home\": {\n                controller: SidenavLeftController,\n                controllerAs: \"sideLeftCtl\",\n                template: require(\"./tpls/sidenavl.template.jade\")(),\n            },\n            \"sidenavRight@home\": {\n                controller: SidenavRightController,\n                controllerAs: \"sideRightCtl\",\n                template: require(\"./tpls/sidenavr.template.jade\")(),\n            },\n            \"content@home\": {\n                controller: ContentController,\n                controllerAs: \"contentCtl\",\n                template: require(\"./tpls/content.template.jade\")(),\n            }\n        }\n    });\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/home/router.ts\n **/","/**\n * Created by NICK on 16/8/10.\n */\n\nimport * as _ from 'lodash';\nimport Dictionary = _.Dictionary;\n\nexport class SidenavLeftController {\n    static $inject = [\"mdSideMenuSections\", \"toolbarUtils\", \"fxAction\"];\n\n    toolbarBottom: Object;\n    selectedNodes = {};\n    modules: Array<any>;\n\n    constructor(private mdSideMenuSections, private toolbarUtils, private fxAction) {\n        this.initModules().initToolbar();\n    }\n\n    /**\n     * 计算模块的层级关系\n     */\n    getModules() {\n        let promise = this.fxAction.doAction('moduleMenuAction', null);\n\n        promise && promise.then((results)=> {\n            let nodes: Array<any> = [];\n\n            _.forEach(results, (result)=> {\n                if (_.isArray(result)) {\n                    nodes = nodes.concat(result);\n                }\n            });\n\n            let nodesGroupByDepth = _.groupBy(_.keyBy(nodes, \"key\"), \"depth\");\n            let depth = 0, root = {};\n\n            while (true) {\n                let nodesIsDepth = nodesGroupByDepth[depth];\n                let parentIsDepth = nodesGroupByDepth[depth - 1];\n\n                if (nodesIsDepth && nodesIsDepth.length > 0) {\n                    switch (depth) {\n                        case 0:\n                            root = nodesIsDepth[0];\n                            break;\n                        case 1:\n                            root['nodes'] = nodesIsDepth;\n                            break;\n                        default:\n                            _.forEach(parentIsDepth, (parentNode)=> {\n                                parentNode[\"nodes\"] = _.filter(nodesIsDepth, (node)=> {\n                                    return node.lft > parentNode.lft && parentNode.rgt > node.rgt;\n                                });\n                            });\n                            break;\n                    }\n                } else {\n                    break;\n                }\n                depth++;\n            }\n\n            this.mdSideMenuSections.sections = root[\"nodes\"];\n            this.modules = this.mdSideMenuSections.sections;\n            this.selectedNodes = _.keyBy(nodesGroupByDepth[1], \"key\") || {};\n        });\n    }\n\n    /**\n     * 初始化菜单\n     * @returns {SidenavLeftController}\n     */\n    initModules() {\n        this.getModules();\n\n        this.mdSideMenuSections.options = {\n            children: \"nodes\",\n            key: 'key',\n            dirSelectable: false,\n            orderBy: 'lft',\n            filterField: 'key'\n        };\n\n        return this;\n    }\n\n    /**\n     * 初始化底部按钮\n     * @returns {SidenavLeftController}\n     */\n    initToolbar() {\n        this.toolbarBottom = [\n            this.toolbarUtils.layoutBuilder(\"\", \"row\", \"space-around center\").toolsBuilder([\n                this.toolbarUtils.btnBuilder(\"刷新\", \"md-icon-button\", false, \"top\").iconBuilder(\"refresh\").btnClick(($event)=> {\n                    this.getModules();\n                }).toValue(),\n                this.toolbarUtils.btnBuilder(\"全部折叠\", \"md-icon-button\", false, \"top\").iconBuilder(\"dehaze\").btnClick(($event)=> {\n                    _.forEach(this.selectedNodes, (val, key)=> {\n                        delete this.selectedNodes[key];\n                    })\n                }).toValue()\n            ]).toValue()\n        ];\n\n        return this;\n    }\n\n    doLink($event, node) {\n\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/home/ctls/sidenavl.controller.ts\n **/"],"sourceRoot":""}