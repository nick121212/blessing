{"version":3,"sources":["webpack:///./src/pages/page/router.ts?0e30","webpack:///./src/pages/page/ctls/page.d3.controller.ts?28a4"],"names":[],"mappings":"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","file":"0.54cc109fae4358a3bf1e.hot-update.js","sourcesContent":["/**\n * Created by NICK on 16/8/9.\n */\n\nimport {PageController} from './ctls/page.controller';\nimport {D3Controller} from './ctls/page.d3.controller';\n\nexport const initRouter = ($urlRouterProvider, $stateProvider) => {\n    // 路由规则\n    $stateProvider.state(\"home.page\", {\n        url: \"page/:key\",\n        data: {\n            permissions: {\n                except: [\"anonymous\"],\n                only: [\"user\"]\n            }\n        },\n        views: {\n            \"content\": {\n                controller: PageController,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.template.jade\")()\n            }\n        }\n    }).state('home.d3', {\n        url: \"d3/:key\",\n        views: {\n            \"content\": {\n                controller: D3Controller,\n                controllerAs: \"pageCtl\",\n                template: \"<svg flex id='homed3'></svg>\"\n            }\n        }\n    });\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/router.ts\n **/","/**\n * Created by NICK on 16/8/10.\n */\n\nimport * as d3 from 'd3';\nimport * as _ from 'lodash';\n\nexport class D3Controller {\n    static $inject = [\"$stateParams\"];\n\n    constructor(private $stateParams: ng.ui.IStateParamsService) {\n        this.drawSuits();\n    }\n\n    drawSuits() {\n        let nodes = [\n            { name: \"BeiJing\" },\n            { name: \"XiaMen\" },\n            { name: \"XiAn\" },\n            { name: \"HangZhou\" },\n            { name: \"ShangHai\" },\n            { name: \"QingDao\" },\n            { name: \"NanJing\" }\n        ], links = [\n            { source: 0, target: 1 },\n            { source: 0, target: 2 },\n            { source: 0, target: 3 },\n            { source: 1, target: 4 },\n            { source: 1, target: 5 },\n            { source: 1, target: 6 }\n        ];\n        const width = innerWidth || Math.max(960, innerWidth),\n            height = innerHeight || Math.max(500, innerHeight);\n\n        let svg = d3.select(\"#homed3\")\n            .append(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height);\n        // 通过布局来转换数据，然后进行绘制\n        let simulation = d3.forceSimulation(nodes)\n            .force(\"link\", d3.forceLink(links).distance(100))\n            .force(\"charge\", d3.forceManyBody().strength(-300))\n            .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n        let color = d3.scaleOrdinal(d3.schemeCategory20);\n        let marker = svg.append(\"marker\")\n            .attr(\"id\", function (d: any) { return d; })\n            .attr(\"id\", \"resolved\")\n            .attr(\"markerUnits\", \"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n            .attr(\"markerUnits\", \"userSpaceOnUse\")\n            .attr(\"viewBox\", \"0 -5 10 10\")//坐标系的区域\n            .attr(\"refX\", 32)//箭头坐标\n            .attr(\"refY\", -1)\n            .attr(\"markerWidth\", 12)//标识的大小\n            .attr(\"markerHeight\", 12)\n            .attr(\"orient\", \"auto\")//绘制方向，可设定为：auto（自动确认方向）和 角度值\n            .attr(\"stroke-width\", 2)//箭头宽度\n            .append(\"path\")\n            .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n            .attr('fill', '#ff0000');//箭头颜色\n        let svg_links = svg.selectAll(\".edgepath\")\n            .data(links)\n            .enter()\n            .append(\"path\")\n            .attr(\"d\", function (d: any) { return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y })\n            .attr(\"class\", \"edgepath\")\n            .attr(\"id\", function (d, i) { return 'edgepath' + i; })\n            .style(\"stroke\", \"#B43232\")\n            .style(\"pointer-events\", \"none\")\n            .style(\"stroke-width\", 1)\n            .attr(\"marker-end\", \"url(#resolved)\");\n\n        let drag = d3.drag().on(\"drag\", function (d: any) {\n            d3.select(this)\n                .attr(\"cx\", d.cx = d3.event.x)\n                .attr(\"cy\", d.cy = d3.event.y);\n        });\n        let svg_nodes = svg.selectAll(\"circle\")\n            .data(nodes)\n            .enter()\n            .append(\"circle\")\n            .attr(\"r\", 20)\n            .style(\"fill\", function (d, i: any) {\n                return color(i);\n            })\n            .attr(\"cx\", function (d: any) { return d.x; })\n            .attr(\"cy\", function (d: any) { return d.y; });\n        let svg_text = svg.selectAll(\"text\")\n            .data(nodes)\n            .enter()\n            .append(\"text\")\n            .style(\"fill\", \"#000\")\n            .attr(\"dx\", 20)\n            .attr(\"dy\", 10)\n            .text(function (d) { return d.name; });\n\n        function draw() {\n            svg_nodes\n                .attr(\"cx\", function (d: any) { return d.x; })\n                .attr(\"cy\", function (d: any) { return d.y; });\n\n            svg_text\n                .attr(\"x\", function (d: any) { return d.x; })\n                .attr(\"y\", function (d: any) { return d.y; });\n\n            svg_links.attr('d', function (d: any) {\n                var path = 'M ' + (d.source.x + 5) + ' ' + (d.source.y + 5) + ' L ' + d.target.x + ' ' + d.target.y;\n                return path;\n            });\n        }\n        simulation.on(\"tick\", draw);\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/ctls/page.d3.controller.ts\n **/"],"sourceRoot":""}