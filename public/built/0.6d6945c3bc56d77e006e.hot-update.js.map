{"version":3,"sources":["webpack:///./src/directives/action/index.ts?1f08","webpack:///./src/directives/action/directives/wizard.directive.ts?b00c"],"names":[],"mappings":"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","file":"0.6d6945c3bc56d77e006e.hot-update.js","sourcesContent":["/**\n * Created by NICK on 16/8/9.\n */\n\nimport * as angular from 'angular';\nimport * as ngMaterial from 'angular-material';\nimport 'expose?JSONEditor!jsoneditor';\nimport 'ng-jsoneditor';\n\nimport actProviderRegFunc from './services/action.provider';\nimport actUtilsFunc from './services/utils.service';\nimport restSvrMod from '../../services/rest.service';\nimport moduleSchFunc from './schemas/modules.value';\nimport commonSchFunc from './schemas/common.value';\nimport backupFunc from './schemas/backup.value';\nimport schemaFunc from './schemas/schema.value';\nimport actionFunc from './schemas/action.value';\nimport formActionFunc from './directives/form.directive';\nimport listActionFunc from './directives/list.directive';\nimport autoCompleteActionFunc from './directives/autocomplete.directive';\nimport dialogFormFunc from './directives/dialog-form.directive';\nimport searchActionFunc from './directives/search.directive';\nimport wizardActionFunc from './directives/wizard.directive';\nimport wizardDialogActionFunc from './directives/dialog-wizard.directive';\nimport builderActionFunc from './directives/builder.directive';\n\nimport autoCompleteFunc from './services/autocomplete.provider';\nimport jsonEditorFunc from './services/jsoneditor.provider';\n\nimport 'angular-schema-form';\nimport 'angular-schema-form-ng-material';\nimport './services/validator.custom.value';\n\nconst _name = \"fxAction\";\nexport const module = angular.module(`${_name}Module`, [ngMaterial, restSvrMod, \"schemaForm\", \"ng.jsoneditor\"]);\n\nactUtilsFunc(module);\nactProviderRegFunc(module);\nformActionFunc(module);\nlistActionFunc(module);\nmoduleSchFunc(module);\ndialogFormFunc(module);\nsearchActionFunc(module);\nwizardActionFunc(module);\nwizardDialogActionFunc(module);\nbuilderActionFunc(module);\ncommonSchFunc(module);\nautoCompleteFunc(module);\njsonEditorFunc(module);\nbackupFunc(module);\nschemaFunc(module);\nactionFunc(module);\nautoCompleteActionFunc(module);\n\nfunction sfLayout(args) {\n    var layoutDiv = args.fieldFrag.querySelector('[sf-layout]');\n\n    if (layoutDiv && args.form.grid) {\n        Object.getOwnPropertyNames(args.form.grid).forEach(function (property, idx, array) {\n            layoutDiv.setAttribute(property, args.form.grid[property]);\n        });\n    }\n};\n// 处理默认的错误信息\nmodule\n    .config([\"sfErrorMessageProvider\", (sfErrorMessageProvider) => {\n        // sfErrorMessageProvider.setDefaultMessage(\"10000\", \"邮箱格式不正确\");\n        // sfErrorMessageProvider.setDefaultMessage(\"10001\", \"两次密码不一致\");\n        // sfErrorMessageProvider.setDefaultMessage(\"10002\", \"用户名中存在非法字符\");\n        // sfErrorMessageProvider.setDefaultMessage(\"10003\", \"手机格式不正确\");\n        // sfErrorMessageProvider.setDefaultMessage(\"10004\", \"JSON格式不正确\");\n        // sfErrorMessageProvider.setDefaultMessage(\"10005\", \"地址格式不正确\");\n        sfErrorMessageProvider.setDefaultMessage(\"302\", \"[{{title}}]是必填项\");\n        sfErrorMessageProvider.setDefaultMessage(\"103\", \"[{{title}}]超过了最大值{{schema.maximum}}\");\n        sfErrorMessageProvider.setDefaultMessage(\"101\", \"[{{title}}]小于最小值{{schema.minimum}}\");\n        sfErrorMessageProvider.setDefaultMessage(\"200\", \"[{{title}}]字符长度小于最小值({{schema.minLength}})\");\n        sfErrorMessageProvider.setDefaultMessage(\"201\", \"[{{title}}]字符长度大于最大值({{schema.maxLength}})\");\n        sfErrorMessageProvider.setDefaultMessage(\"400\", \"数组长度不正确，{{schema.minItems||0}}-{{schema.maxItems||'∞'}}\");\n        sfErrorMessageProvider.setDefaultMessage(\"500\", \"格式不正确\");\n    }])\n    // 添加自定义的表单组件\n    .config([\"sfBuilderProvider\", \"schemaFormDecoratorsProvider\", \"jsonEditorBuilderProvider\", \"autoCompleteBuilderProvider\", (sfBuilderProvider, schemaFormDecoratorsProvider, jsonEditorBuilder, autoCompleteBuilder) => {\n        // jsoneditor--schema-form组件化\n        schemaFormDecoratorsProvider.defineAddOn(\n            'materialDecorator',\n            'jeditor',\n            \"./decorators/jsoneditor.jade\",\n            sfBuilderProvider.stdBuilders.concat(jsonEditorBuilder.builder)\n        );\n        // card--schema-form组件化\n        schemaFormDecoratorsProvider.defineAddOn(\n            'materialDecorator',\n            'card',\n            \"./decorators/card.jade\",\n            [sfBuilderProvider.builders.sfField, sfBuilderProvider.builders.condition, sfBuilderProvider.builders.transclusion]\n        );\n        // autocomplete--schema-form组件化\n        schemaFormDecoratorsProvider.defineAddOn(\n            'materialDecorator',\n            'autocomplete-1',\n            \"./decorators/autocomplete-1.jade\",\n            [sfBuilderProvider.builders.sfField, sfBuilderProvider.builders.ngModel, sfLayout, sfBuilderProvider.builders.condition, sfBuilderProvider.builders.transclusion, autoCompleteBuilder.builder]\n        );\n    }])\n    // 打包工具的原因,只能把模板字符串写入cache中\n    .run([\"$templateCache\", \"autoCompleteBuilder\", ($templateCache: ng.ITemplateCacheService) => {\n        $templateCache.put('./decorators/jsoneditor.jade', require(\"./decorators/jsoneditor.jade\")());\n        $templateCache.put('./decorators/card.jade', require(\"./decorators/card.jade\")());\n        $templateCache.put('./decorators/autocomplete-1.jade', require(\"./decorators/autocomplete-1.jade\")());\n        $templateCache.put('./decorators/section-1.jade', require(\"./decorators/section-1.jade\")());\n    }]);\n\n\nexport default `${module.name}`;\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/action/index.ts\n **/","import { module } from '../index';\nimport { IActionModel, ISchemaForm, ActionType } from '../models/action.model';\n\ninterface IDirectiveScope extends ng.IScope {\n\n}\n\ninterface IDirectiveAttr extends ng.IAttributes {\n\n}\n\nclass Controller {\n    static $inject = [\"$scope\", \"$timeout\", \"fxAction\", \"toolbarUtils\", \"materialUtils\", \"$mdDialog\"];\n\n    isShow: boolean = true;\n    actionModel: IActionModel;\n    key: string;\n    formData: Object;\n    selectedIndex: number = 0;\n    toolbars: Array<any>;\n    $forms: { [id: string]: ng.IFormController };\n    isBusy: boolean;\n    submitCallBack: Function;\n\n    constructor(private $scope, private $timeout, private fxAction, private toolbarUtils, private materialUtils: fx.utils.materialStatic, private $mdDialog) {\n        this.initToolbar();\n\n        this.$scope.$on(\"$destroy\", () => {\n            this.formData = null;\n            this.$forms = null;\n            this.toolbars = null;\n            this.actionModel = null;\n        });\n    }\n\n    /**\n     * 初始化form，因为有多个form，所以需要用一个对象来保存所有的表单对象，用于后期验证表单的$valid\n     * @param action\n     * @param $scope\n     */\n    initForm(action: IActionModel, $scope: ng.IScope) {\n        if (!this.$forms) {\n            this.$forms = {};\n        }\n        this.$forms[action.key] = $scope[`${action.key}Form`];\n    }\n\n    /**\n     * 判断是否需要显示form,默认只有第一页和最后一页首次加载\n     * @param action\n     * @param index\n     * @returns {boolean}\n     */\n    showForm(action: IActionModel, index: number) {\n        return index === 0 || this.$forms.hasOwnProperty(action.key) || index == this.selectedIndex || index == this.actionModel.wizard.actions.length - 1;\n    }\n\n    /**\n     * 验证当前表单是否正确\n     * @returns {boolean}\n     */\n    doCheckCurrentForm(index?: number) {\n        let actionModel = this.actionModel.wizard.actions[_.isUndefined(index) ? this.selectedIndex : index];\n\n        // 验证表单是否正确\n        if (this.$forms) {\n            let formController = this.$forms[`${(actionModel as IActionModel).key}`];\n\n            if (!this.fxAction.doFormCheck(formController)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * 检查所有的表单是否正确\n     * @returns {boolean}\n     */\n    doCheckForms() {\n        let res = true;\n\n        _.each(this.actionModel.wizard.actions, (action, index) => {\n            res = this.doCheckCurrentForm(index);\n\n            if (!res) {\n                this.selectedIndex = index;\n                return false;\n            }\n        });\n\n        return res;\n    }\n\n    /**\n     * 重置表单数据\n     */\n    reset() {\n        this.formData = {};\n        this.$forms = {};\n        this.selectedIndex = 0;\n        this.isShow = false;\n        this.$timeout(() => {\n            this.isShow = true;\n        }, 0);\n    }\n\n    /**\n     * 添加wizard的按钮组,包括上一步,下一步和完成按钮\n     * 每个按钮都需要验证表单的正确性\n     * 每个按钮如果有接口操作,都需要调用接口,接口返回正常才可用\n     */\n    initToolbar() {\n        this.toolbars = [\n            this.toolbarUtils.btnBuilder(\"上一步\", null, true, \"top\").iconBuilder(\"navigate_before\").conditionBuilder(\"wizardCtl.selectedIndex>0\", false).btnClick(($event) => {\n                this.selectedIndex && this.selectedIndex--;\n            }).toValue(),\n            this.toolbarUtils.btnBuilder(\"下一步\", null, true, \"top\").iconBuilder(null, null, \"navigate_next\").conditionBuilder(\"wizardCtl.selectedIndex < wizardCtl.actionModel.wizard.actions.length-1\", false).btnClick(($event) => {\n                if (this.doCheckCurrentForm() && _.isArray(this.actionModel.wizard.actions) && this.actionModel.wizard.actions.length > this.selectedIndex) {\n                    this.selectedIndex++;\n                }\n            }).toValue(),\n            this.toolbarUtils.btnBuilder(\"完成\", \"md-primary\", true, \"top\").iconBuilder(\"done_all\").conditionBuilder(\"!wizardCtl.isBusy && wizardCtl.selectedIndex===wizardCtl.actionModel.wizard.actions.length-1\", false).btnClick(($event) => {\n                if (this.doCheckForms()) {\n                    this.isBusy = true;\n                    this.fxAction.doAction(this.actionModel.key, this.formData).then((result) => {\n                        this.actionModel.closeDialog === true && this.$mdDialog.hide(result);\n\n                        if (_.isFunction(this.submitCallBack)) {\n                            this.submitCallBack(result);\n                        }\n                        // this.materialUtils.showMsg(this.actionModel.successMsg || \"操作成功！\");\n                        // this.reset();\n                    }).finally(() => {\n                        this.isBusy = false;\n                    });\n                }\n            }).toValue()\n        ];\n    }\n\n    /**\n     * 通过key来获取数据\n     */\n    getActionModel() {\n        let actionModel;\n\n        this.fxAction.getModel(this.key).then((model: IActionModel) => {\n            actionModel = _.cloneDeep(model);\n\n            return this.fxAction.getModels(model.wizard.actions);\n        }).then((actionModels: Array<IActionModel>) => {\n            let actions = [];\n\n            _.each(actionModel.wizard.actions, (action) => {\n                if (_.isString(action)) {\n                    action = actionModels[action];\n                }\n                // 如果是form/wizard的话，判断dataSchema是否存在，不存在则使用wizard的defaultSchema\n                if (action && (action.type === ActionType.form || action.type === ActionType.wizard)) {\n                    // if (!action.form.dataSchema && action.type === ActionType.form) {\n                    //     action.form.dataSchema = actionModel.wizard.defaultSchema.dataSchema;\n                    // }\n                    actions.push(action);\n                }\n            });\n            actionModel.wizard.actions = actions;\n            this.actionModel = actionModel;\n        });\n    }\n}\n\n/**\n * 操作指令,某个表单操作\n * @returns {{restrict: string, template: any, scope: {}, replace: boolean, link: (($scope:IDirectiveScope))}}\n * @constructor\n */\nfunction Directive(): ng.IDirective {\n    return {\n        restrict: 'EA',\n        template: require(\"../tpls/wizard.jade\")(),\n        scope: true,\n        require: \"^fxWizardAction\",\n        bindToController: {\n            formData: \"=ngModel\",\n            submitCallBack: \"=?ngSubmit\",\n            key: \"@\"\n        },\n        controller: Controller,\n        controllerAs: 'wizardCtl',\n        replace: true,\n        transclude: true,\n        link: ($scope: IDirectiveScope, $ele: ng.IAugmentedJQuery, $attr: IDirectiveAttr, $ctl: Controller) => {\n            $scope.$watch(() => {\n                return $ctl.key;\n            }, () => {\n                $ctl.getActionModel();\n            });\n        }\n    };\n}\nmodule.directive(\"fxWizardAction\", Directive);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/directives/action/directives/wizard.directive.ts\n **/"],"sourceRoot":""}