{"version":3,"sources":["webpack:///./src/pages/page/router.ts?0e30","webpack:///./src/pages/page/ctls/page.d3.controller.ts?28a4"],"names":[],"mappings":"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","file":"0.fc328778d6f0eca4219d.hot-update.js","sourcesContent":["/**\n * Created by NICK on 16/8/9.\n */\n\nimport {PageController} from './ctls/page.controller';\nimport {D3Controller} from './ctls/page.d3.controller';\n\nexport const initRouter = ($urlRouterProvider, $stateProvider) => {\n    // 路由规则\n    $stateProvider.state(\"home.page\", {\n        url: \"page/:key\",\n        data: {\n            permissions: {\n                except: [\"anonymous\"],\n                only: [\"user\"]\n            }\n        },\n        views: {\n            \"content\": {\n                controller: PageController,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/page.template.jade\")()\n            }\n        }\n    }).state('home.d3', {\n        url: \"d3/:key\",\n        views: {\n            \"content\": {\n                controller: D3Controller,\n                controllerAs: \"pageCtl\",\n                template: require(\"./tpls/paged3.template.jade\")()//\"<svg flex id='homed3'></svg>\"\n            }\n        }\n    });\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/router.ts\n **/","/**\n * Created by NICK on 16/8/10.\n */\n\nimport * as d3 from 'd3';\nimport * as _ from 'lodash';\n\nlet nodes = [\n    { name: \"桂林\" },\n    { name: \"广州\" },\n    { name: \"厦门\" },\n    { name: \"杭州\" },\n    { name: \"上海\" },\n    { name: \"青岛\" },\n    { name: \"天津\" }\n], links = [\n    { source: 0, target: 1 },\n    { source: 0, target: 2 },\n    { source: 0, target: 3 },\n    { source: 1, target: 4 },\n    { source: 1, target: 5 },\n    { source: 1, target: 6 }\n];\n\nexport class D3Controller {\n    static $inject = [\"$stateParams\"];\n\n    private simulation: any;\n    private link:any;\n\n    constructor(private $stateParams: ng.ui.IStateParamsService) {\n        this.drawSuits();\n    }\n\n    doTrans() {\n        links.pop();\n        this.simulation.nodes(nodes)\n            .force(\"link\", d3.forceLink(links).distance(100)).restart();\n    }\n\n    drawSuits() {\n        const width = innerWidth || Math.max(960, innerWidth),\n            height = innerHeight || Math.max(500, innerHeight);\n        let svg = d3.select(\"#homed3\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n\n        let color = d3.scaleOrdinal(d3.schemeCategory20);\n        let simulation = this.simulation = d3.forceSimulation()\n            .force(\"link\", d3.forceLink().id((d: { name: string }): string => { return d.name; }))\n            .force(\"charge\", d3.forceManyBody().strength(-300))\n            .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n        let link = svg.append(\"g\")\n            .attr(\"class\", \"links\")\n            .selectAll(\"line\")\n            .data(links)\n            .enter()\n            .append(\"line\")\n            .style(\"stroke\", (d, i: any): string => {\n                return color(i);\n            })\n            .attr(\"stroke-width\", (d) => { return Math.sqrt(1.2) });\n\n        let dragFunc = d3.drag()\n            .on(\"start\", dragstarted)\n            .on(\"drag\", dragged)\n            .on(\"end\", dragended);\n\n        let node = svg.append(\"g\")\n            .attr(\"class\", \"nodes\")\n            .selectAll(\"circle\")\n            .data(nodes)\n            .enter()\n            .append(\"circle\")\n            .attr(\"r\", 5)\n            .style(\"fill\", (d, i: any): string => {\n                return color(i);\n            })\n            .call(dragFunc);\n\n        simulation.nodes(nodes)\n            .on(\"tick\", ticked)\n            .force(\"link\", d3.forceLink(links).distance(100));\n\n        function dragstarted(d) {\n            if (!d3.event.active) simulation.alphaTarget(0.5).restart();\n            d.fx = d.x;\n            d.fy = d.y;\n        }\n\n        function dragged(d) {\n            d.fx = d3.event.x;\n            d.fy = d3.event.y;\n        }\n\n        function dragended(d) {\n            if (!d3.event.active) simulation.alphaTarget(0);\n            d.fx = null;\n            d.fy = null;\n        }\n\n        function ticked() {\n            link\n                .attr(\"x1\", function (d: any) { return d.source.x; })\n                .attr(\"y1\", function (d: any) { return d.source.y; })\n                .attr(\"x2\", function (d: any) { return d.target.x; })\n                .attr(\"y2\", function (d: any) { return d.target.y; });\n\n            node\n                .attr(\"cx\", function (d: any) { return d.x; })\n                .attr(\"cy\", function (d: any) { return d.y; });\n        }\n\n        return;\n\n        // const width = innerWidth || Math.max(960, innerWidth),\n        //     height = innerHeight || Math.max(500, innerHeight);\n\n        // let svg = d3.select(\"#homed3\")\n        //     .append(\"svg\")\n        //     .attr(\"width\", width)\n        //     .attr(\"height\", height);\n        // // 通过布局来转换数据，然后进行绘制\n        // let simulation = d3.forceSimulation(nodes)\n        //     .force(\"link\", d3.forceLink(links).distance(100))\n        //     .force(\"charge\", d3.forceManyBody().strength(-300))\n        //     .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n        // let color = d3.scaleOrdinal(d3.schemeCategory20);\n        // let marker = svg.append(\"marker\")\n        //     .attr(\"id\", function (d: any) { return d; })\n        //     .attr(\"id\", \"resolved\")\n        //     .attr(\"markerUnits\", \"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n        //     .attr(\"markerUnits\", \"userSpaceOnUse\")\n        //     .attr(\"viewBox\", \"0 -5 10 10\")//坐标系的区域\n        //     .attr(\"refX\", 32)//箭头坐标\n        //     .attr(\"refY\", -1)\n        //     .attr(\"markerWidth\", 12)//标识的大小\n        //     .attr(\"markerHeight\", 12)\n        //     .attr(\"orient\", \"auto\")//绘制方向，可设定为：auto（自动确认方向）和 角度值\n        //     .attr(\"stroke-width\", 2)//箭头宽度\n        //     .append(\"path\")\n        //     .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n        //     .attr('fill', '#ff0000');//箭头颜色\n        // let svg_links = svg.selectAll(\".edgepath\")\n        //     .data(links)\n        //     .enter()\n        //     .append(\"path\")\n        //     .attr(\"d\", function (d: any) { return 'M ' + d.source.x + ' ' + d.source.y + ' L ' + d.target.x + ' ' + d.target.y })\n        //     .attr(\"class\", \"edgepath\")\n        //     .attr(\"id\", function (d, i) { return 'edgepath' + i; })\n        //     .style(\"stroke\", \"#B43232\")\n        //     .style(\"pointer-events\", \"none\")\n        //     .style(\"stroke-width\", 1)\n        //     .attr(\"marker-end\", \"url(#resolved)\");\n\n        // let drag = d3.drag().on(\"drag\", function (d: any) {\n        //     d3.select(this)\n        //         .attr(\"cx\", d.cx = d3.event.x)\n        //         .attr(\"cy\", d.cy = d3.event.y);\n        // });\n        // let svg_nodes = svg.selectAll(\"circle\")\n        //     .data(nodes)\n        //     .enter()\n        //     .append(\"circle\")\n        //     .attr(\"r\", 20)\n        //     .style(\"fill\", function (d, i: any) {\n        //         return color(i);\n        //     })\n        //     .attr(\"cx\", function (d: any) { return d.x; })\n        //     .attr(\"cy\", function (d: any) { return d.y; });\n        // let svg_text = svg.selectAll(\"text\")\n        //     .data(nodes)\n        //     .enter()\n        //     .append(\"text\")\n        //     .style(\"fill\", \"#000\")\n        //     .attr(\"dx\", 20)\n        //     .attr(\"dy\", 10)\n        //     .text(function (d) { return d.name; });\n\n        // function draw() {\n        //     svg_nodes\n        //         .attr(\"cx\", function (d: any) { return d.x; })\n        //         .attr(\"cy\", function (d: any) { return d.y; });\n\n        //     svg_text\n        //         .attr(\"x\", function (d: any) { return d.x; })\n        //         .attr(\"y\", function (d: any) { return d.y; });\n\n        //     svg_links.attr('d', function (d: any) {\n        //         var path = 'M ' + (d.source.x + 5) + ' ' + (d.source.y + 5) + ' L ' + d.target.x + ' ' + d.target.y;\n        //         return path;\n        //     });\n        // }\n        // simulation.on(\"tick\", draw);\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/pages/page/ctls/page.d3.controller.ts\n **/"],"sourceRoot":""}